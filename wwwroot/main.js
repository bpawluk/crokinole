!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.METADATA_KEY=i;var r=n(24);e.Container=r.Container;var o=n(4);e.BindingScopeEnum=o.BindingScopeEnum,e.BindingTypeEnum=o.BindingTypeEnum,e.TargetTypeEnum=o.TargetTypeEnum;var a=n(40);e.AsyncContainerModule=a.AsyncContainerModule,e.ContainerModule=a.ContainerModule;var s=n(41);e.injectable=s.injectable;var c=n(42);e.tagged=c.tagged;var u=n(43);e.named=u.named;var p=n(14);e.inject=p.inject,e.LazyServiceIdentifer=p.LazyServiceIdentifer;var h=n(44);e.optional=h.optional;var f=n(45);e.unmanaged=f.unmanaged;var l=n(46);e.multiInject=l.multiInject;var d=n(47);e.targetName=d.targetName;var y=n(48);e.postConstruct=y.postConstruct;var _=n(12);e.MetadataReader=_.MetadataReader;var v=n(7);e.id=v.id;var g=n(6);e.decorate=g.decorate;var b=n(17);e.traverseAncerstors=b.traverseAncerstors,e.taggedConstraint=b.taggedConstraint,e.namedConstraint=b.namedConstraint,e.typeConstraint=b.typeConstraint;var m=n(8);e.getServiceIdentifierAsString=m.getServiceIdentifierAsString;var O=n(49);e.multiBindToService=O.multiBindToService},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={Game:Symbol.for("Game"),canvas_name:Symbol.for("canvas_name"),ISceneBuilder:Symbol.for("ISceneBuilder"),ILightsProvider:Symbol.for("ILightsProvider"),IPhysicsProvider:Symbol.for("IPhysicsProvider"),IGuiProvider:Symbol.for("IGuiProvider"),IMakingMoveGui:Symbol.for("IMakingMoveGui"),IGameController:Symbol.for("IGameController"),IPlayerFactory:Symbol.for("IPlayerFactory"),ICameraManager:Symbol.for("ICameraManager"),IComplexShapesBuilder:Symbol.for("IComplexShapesBuilder"),IUserInput:Symbol.for("IUserInput"),IVectorMathHelper:Symbol.for("IVectorMathHelper")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(0);function o(t,e,n,r,o){var a={},s="number"==typeof o,c=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var u=a[c];if(Array.isArray(u))for(var p=0,h=u;p<h.length;p++){var f=h[p];if(f.key===r.key)throw new Error(i.DUPLICATED_METADATA+" "+f.key.toString())}else u=[];u.push(r),a[c]=u,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,i){e(n,i,t)}}e.tagParameter=function(t,e,n,i){o(r.TAGGED,t,e,i,n)},e.tagProperty=function(t,e,n){o(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([s(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=0;e.id=function(){return i++}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function o(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var i="",r=n(t,e);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=o(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var i=r(e.serviceIdentifier);return n.push(i),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(i.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",i=e.getNamedTag(),r=e.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=o},function(t,e,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(e,"__esModule",{value:!0});var i=n(58);e.DispatcherBase=i.DispatcherBase,e.DispatcherWrapper=i.DispatcherWrapper,e.EventListBase=i.EventListBase;var r=n(18);e.Subscription=r.Subscription},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new i.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(17),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new i.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new i.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new i.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new i.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(i.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(0),o=n(3),a=n(6),s=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=s,e.inject=function(t){return function(e,n,s){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(e.name));var c=new o.Metadata(r.INJECT_TAG,t);"number"==typeof s?a.tagParameter(e,n,s,c):a.tagProperty(e,n,c)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(7),o=n(3),a=n(31),s=function(){function t(t,e,n,s){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var c=null;"string"==typeof s?c=new o.Metadata(i.NAMED_TAG,s):s instanceof o.Metadata&&(c=s),null!==c&&this.metadata.push(c)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(i.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==i.INJECT_TAG&&t.key!==i.MULTI_INJECT_TAG&&t.key!==i.NAME_TAG&&t.key!==i.UNMANAGED_TAG&&t.key!==i.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===i.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==i.INJECT_TAG&&t.key!==i.MULTI_INJECT_TAG&&t.key!==i.NAME_TAG&&t.key!==i.UNMANAGED_TAG&&t.key!==i.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(i.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var i=0,r=e.metadata;i<r.length;i++){var o=r[i];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),r=n(11),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(i.NAMED_TAG);e.namedConstraint=s;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var i=e.bindings[0].implementationType;return t===i}return!1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){this.handler=t,this.isOnce=e,this.isExecuted=!1}return t.prototype.execute=function(t,e,n){if(!this.isOnce||!this.isExecuted){this.isExecuted=!0;var i=this.handler;t?setTimeout((function(){i.apply(e,n)}),1):i.apply(e,n)}},t}();e.Subscription=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(20),r=n(5);window.addEventListener("DOMContentLoaded",()=>i.gameDependencyContainer.get(r.TYPES.Game).start())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(21);const i=n(1),r=n(5),o=n(50),a=n(51),s=n(52),c=n(53),u=n(54),p=n(55),h=n(56),f=n(67),l=n(68),d=n(70),y=n(71),_=n(72),v=new i.Container;e.gameDependencyContainer=v,v.bind(r.TYPES.Game).to(o.Game).inSingletonScope(),v.bind(r.TYPES.canvas_name).toConstantValue("game"),v.bind(r.TYPES.ISceneBuilder).to(s.CrokinoleSceneBuilder).inSingletonScope(),v.bind(r.TYPES.ILightsProvider).to(u.CrokinoleLightsProvider),v.bind(r.TYPES.IPhysicsProvider).to(c.CrokinolePhysicsProvider),v.bind(r.TYPES.IGuiProvider).to(d.GuiProvider).inSingletonScope(),v.bind(r.TYPES.IMakingMoveGui).to(y.MakingMoveGui).inSingletonScope(),v.bind(r.TYPES.IGameController).to(h.GameController),v.bind(r.TYPES.IPlayerFactory).to(l.PlayerFactory),v.bind(r.TYPES.ICameraManager).to(p.CameraManager).inSingletonScope(),v.bind(r.TYPES.IComplexShapesBuilder).to(a.ComplexShapesBuilder),v.bind(r.TYPES.IUserInput).to(f.UserInput).inSingletonScope(),v.bind(r.TYPES.IVectorMathHelper).to(_.VectorMathHelper)},function(t,e,n){(function(t,e){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(n){!function(i){var r="object"==typeof e?e:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=a(n);function a(t,e){return function(n,i){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:i}),e&&e(n,i)}}void 0===r.Reflect?r.Reflect=n:o=a(r.Reflect,o),function(e){var n=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,r=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!a&&!s,u={create:a?function(){return R(Object.create(null))}:s?function(){return R({__proto__:null})}:function(){return R({})},has:c?function(t,e){return n.call(t,e)}:function(t,e){return e in t},get:c?function(t,e){return n.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},p=Object.getPrototypeOf(Function),h="object"==typeof t&&t.env&&"true"===t.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[o]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,i)},e.prototype.values=function(){return new n(this._keys,this._values,r)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[o]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function i(t,e){return t}function r(t,e){return e}function a(t,e){return[t,e]}}():Map,l=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new f}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[o]=function(){return this.keys()},t}():Set,d=new(h||"function"!=typeof WeakMap?function(){var t=u.create(),e=i();return function(){function t(){this._key=i()}return t.prototype.has=function(t){var e=r(t,!1);return void 0!==e&&u.has(e,this._key)},t.prototype.get=function(t){var e=r(t,!1);return void 0!==e?u.get(e,this._key):void 0},t.prototype.set=function(t,e){return r(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=r(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=i()},t}();function i(){var e;do{e="@@WeakMap@@"+a()}while(u.has(t,e));return t[e]=!0,e}function r(t,i){if(!n.call(t,e)){if(!i)return;Object.defineProperty(t,e,{value:u.create()})}return t[e]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",i=0;i<16;++i){var r=e[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}():WeakMap);function y(t,e,n){var i=d.get(t);if(O(i)){if(!n)return;i=new f,d.set(t,i)}var r=i.get(e);if(O(r)){if(!n)return;r=new f,i.set(e,r)}return r}function _(t,e,n){var i=y(e,n,!1);return!O(i)&&!!i.has(t)}function v(t,e,n){var i=y(e,n,!1);if(!O(i))return i.get(t)}function g(t,e,n,i){y(n,i,!0).set(t,e)}function b(t,e){var n=[],i=y(t,e,!1);if(O(i))return n;for(var r=function(t){var e=N(t,o);if(!E(e))throw new TypeError;var n=e.call(t);if(!w(n))throw new TypeError;return n}(i.keys()),a=0;;){var s=B(r);if(!s)return n.length=a,n;var c=s.value;try{n[a]=c}catch(t){try{C(r)}finally{throw t}}a++}}function m(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function O(t){return void 0===t}function T(t){return null===t}function w(t){return"object"==typeof t?null!==t:"function"==typeof t}function A(t,e){switch(m(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=N(t,r);if(void 0!==i){var o=i.call(t,n);if(w(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(E(n))if(!w(r=n.call(t)))return r;if(E(i=t.valueOf))if(!w(r=i.call(t)))return r}else{var i;if(E(i=t.valueOf))if(!w(r=i.call(t)))return r;var r,o=t.toString;if(E(o))if(!w(r=o.call(t)))return r}throw new TypeError}(t,"default"===n?"number":n)}function P(t){var e=A(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function I(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function E(t){return"function"==typeof t}function S(t){return"function"==typeof t}function N(t,e){var n=t[e];if(null!=n){if(!E(n))throw new TypeError;return n}}function B(t){var e=t.next();return!e.done&&e}function C(t){var e=t.return;e&&e.call(t)}function M(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===p)return e;if(e!==p)return e;var n=t.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return e;var r=i.constructor;return"function"!=typeof r||r===t?e:r}function R(t){return t.__=void 0,delete t.__,t}e("decorate",(function(t,e,n,i){if(O(n)){if(!I(t))throw new TypeError;if(!S(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var i=(0,t[n])(e);if(!O(i)&&!T(i)){if(!S(i))throw new TypeError;e=i}}return e}(t,e)}if(!I(t))throw new TypeError;if(!w(e))throw new TypeError;if(!w(i)&&!O(i)&&!T(i))throw new TypeError;return T(i)&&(i=void 0),function(t,e,n,i){for(var r=t.length-1;r>=0;--r){var o=(0,t[r])(e,n,i);if(!O(o)&&!T(o)){if(!w(o))throw new TypeError;i=o}}return i}(t,e,n=P(n),i)})),e("metadata",(function(t,e){return function(n,i){if(!w(n))throw new TypeError;if(!O(i)&&!function(t){switch(m(t)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;g(t,e,n,i)}})),e("defineMetadata",(function(t,e,n,i){if(!w(n))throw new TypeError;return O(i)||(i=P(i)),g(t,e,n,i)})),e("hasMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return O(n)||(n=P(n)),function t(e,n,i){if(_(e,n,i))return!0;var r=M(n);return!T(r)&&t(e,r,i)}(t,e,n)})),e("hasOwnMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return O(n)||(n=P(n)),_(t,e,n)})),e("getMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return O(n)||(n=P(n)),function t(e,n,i){if(_(e,n,i))return v(e,n,i);var r=M(n);return T(r)?void 0:t(e,r,i)}(t,e,n)})),e("getOwnMetadata",(function(t,e,n){if(!w(e))throw new TypeError;return O(n)||(n=P(n)),v(t,e,n)})),e("getMetadataKeys",(function(t,e){if(!w(t))throw new TypeError;return O(e)||(e=P(e)),function t(e,n){var i=b(e,n),r=M(e);if(null===r)return i;var o=t(r,n);if(o.length<=0)return i;if(i.length<=0)return o;for(var a=new l,s=[],c=0,u=i;c<u.length;c++){var p=u[c];a.has(p)||(a.add(p),s.push(p))}for(var h=0,f=o;h<f.length;h++){p=f[h];a.has(p)||(a.add(p),s.push(p))}return s}(t,e)})),e("getOwnMetadataKeys",(function(t,e){if(!w(t))throw new TypeError;return O(e)||(e=P(e)),b(t,e)})),e("deleteMetadata",(function(t,e,n){if(!w(e))throw new TypeError;O(n)||(n=P(n));var i=y(e,n,!1);if(O(i))return!1;if(!i.delete(t))return!1;if(i.size>0)return!0;var r=d.get(e);return r.delete(n),r.size>0||d.delete(e),!0}))}(o)}()}(n||(n={}))}).call(this,n(22),n(23))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,u=[],p=!1,h=-1;function f(){p&&c&&(p=!1,c.length?u=c.concat(u):h=-1,u.length&&l())}function l(){if(!p){var t=s(f);p=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||p||s(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=y,r.addListener=y,r.once=y,r.off=y,r.removeListener=y,r.removeAllListeners=y,r.emit=y,r.prependListener=y,r.prependOnceListener=y,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){t.done?r(t.value):new n((function(e){e(t.value)})).then(a,s)}c((i=i.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(25),a=n(2),s=n(4),c=n(0),u=n(12),p=n(26),h=n(33),f=n(35),l=n(7),d=n(8),y=n(38),_=n(39),v=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=l.id(),this._bindingDictionary=new _.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return t.merge=function(e,n){var i=new t,r=p.getBindingDictionary(i),o=p.getBindingDictionary(e),a=p.getBindingDictionary(n);function s(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return s(o,r),s(a,r),i},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=t;i<r.length;i++){var o=r[i],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(this,void 0,void 0,(function(){var e,n,i,o,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,r.label=1;case 1:return n<i.length?(o=i[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=i(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new o.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+d.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new _.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var i=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),o=p.createMockRequest(this,t,e,n);i=r.some((function(t){return t.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,e,n)),i},t.prototype.snapshot=function(){this._snapshots.push(y.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(i){var r=t.rebind.bind(t)(i);return e(r,n),r}};return function(i){return{bindFunction:(r=i,function(n){var i=t.bind.bind(t)(n);return e(i,r),i}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(i),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,i,r,o){var s=null,c={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(null==(s=this._middleware(c)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(c);return s},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=p.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(7),o=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),r=n(2),o=n(4),a=n(0),s=n(13),c=n(8),u=n(28),p=n(3),h=n(29),f=n(30),l=n(32),d=n(15);function y(t){return t._bindingDictionary}function _(t,e,n,o,a){var s=v(n.container,a.serviceIdentifier),u=[];return s.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=v(n.container,a.serviceIdentifier)),u=e?s:s.filter((function(t){var e=new l.Request(t.serviceIdentifier,n,o,t,a);return t.constraint(e)})),function(t,e,n,o){switch(e.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=c.getServiceIdentifierAsString(t),s=r.NOT_REGISTERED;throw s+=c.listMetadataForTarget(a,n),s+=c.listRegisteredBindingsForServiceIdentifier(o,a,v),new Error(s);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=c.getServiceIdentifierAsString(t),s=r.AMBIGUOUS_MATCH+" "+a;throw s+=c.listRegisteredBindingsForServiceIdentifier(o,a,v),new Error(s)}}(a.serviceIdentifier,u,a,n.container),u}function v(t,e){var n=[],i=y(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=v(t.parent,e)),n}e.getBindingDictionary=y,e.plan=function(t,e,n,i,y,v,g,b){void 0===b&&(b=!1);var m=new u.Context(e),O=function(t,e,n,i,r,o){var s=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,c=new p.Metadata(s,n),u=new d.Target(e,i,n,c);if(void 0!==r){var h=new p.Metadata(r,o);u.metadata.push(h)}return u}(n,i,y,"",v,g);try{return function t(e,n,i,a,s,c){var u,p;if(null===s){u=_(e,n,a,null,c),p=new l.Request(i,a,null,u,c);var d=new h.Plan(a,p);a.addPlan(d)}else u=_(e,n,a,s,c),p=s.addChildRequest(c.serviceIdentifier,u,c);u.forEach((function(n){var i=null;if(c.isArray())i=p.addChildRequest(n.serviceIdentifier,n,c);else{if(n.cache)return;i=p}if(n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType){var s=f.getDependencies(e,n.implementationType);if(!a.container.options.skipBaseClassChecks){var u=f.getBaseClassDependencyCount(e,n.implementationType);if(s.length<u){var h=r.ARGUMENTS_LENGTH_MISMATCH(f.getFunctionName(n.implementationType));throw new Error(h)}}s.forEach((function(n){t(e,!1,n.serviceIdentifier,a,i,n)}))}}))}(t,b,y,m,null,O),m}catch(t){throw s.isStackOverflowExeption(t)&&m.plan&&c.circularDependencyToException(m.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,i){var r=new d.Target(o.TargetTypeEnum.Variable,"",e,new p.Metadata(n,i)),a=new u.Context(t);return new l.Request(e,a,null,[],r)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=function(){function t(t){this.id=i.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),r=n(2),o=n(4),a=n(0),s=n(8);e.getFunctionName=s.getFunctionName;var c=n(15);function u(t,e,n,i){var a=t.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=r.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var f=a.userGeneratedMetadata,l=Object.keys(f),d=function(t,e,n,i,r){for(var o=[],a=0;a<r;a++){var s=p(a,t,e,n,i);null!==s&&o.push(s)}return o}(i,e,s,f,0===n.length&&l.length>0?l.length:n.length),y=function t(e,n){for(var i=e.getPropertiesMetadata(n),r=[],a=Object.keys(i),s=0,u=a;s<u.length;s++){var p=u[s],f=i[p],l=h(i[p]),d=l.targetName||p,y=l.inject||l.multiInject,_=new c.Target(o.TargetTypeEnum.ClassProperty,d,y);_.metadata=f,r.push(_)}var v=Object.getPrototypeOf(n.prototype).constructor;if(v!==Object){var g=t(e,v);r=r.concat(g)}return r}(t,n);return d.concat(y)}function p(t,e,n,a,s){var u=s[t.toString()]||[],p=h(u),f=!0!==p.unmanaged,l=a[t],d=p.inject||p.multiInject;if((l=d||l)instanceof i.LazyServiceIdentifer&&(l=l.unwrap()),f){if(!e&&(l===Object||l===Function||void 0===l)){var y=r.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(y)}var _=new c.Target(o.TargetTypeEnum.ConstructorArgument,p.targetName,l);return _.metadata=u,_}return null}function h(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[a.INJECT_TAG],multiInject:e[a.MULTI_INJECT_TAG],targetName:e[a.NAME_TAG],unmanaged:e[a.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return u(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=u(e,s.getFunctionName(i),i,!0),o=r.map((function(t){return t.metadata.filter((function(t){return t.key===a.UNMANAGED_TAG}))})),c=[].concat.apply([],o).length,p=r.length-c;return p>0?p:t(e,i)}return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=function(){function t(t,e,n,r,o){this.id=i.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,i){var r=new t(e,this.parentContext,this,n,i);return this.childRequests.push(r),r},t}();e.Request=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(4),o=n(13),a=n(8),s=n(34),c=function(t,e,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},u=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,o=e.childRequests,p=e.target&&e.target.isArray(),h=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(p&&h)return o.map((function(e){return u(t)(e)}));var f=null;if(!e.target.isOptional()||0!==n.length){var l=n[0],d=l.scope===r.BindingScopeEnum.Singleton,y=l.scope===r.BindingScopeEnum.Request;if(d&&l.activated)return l.cache;if(y&&null!==t&&t.has(l.id))return t.get(l.id);if(l.type===r.BindingTypeEnum.ConstantValue)f=l.cache;else if(l.type===r.BindingTypeEnum.Function)f=l.cache;else if(l.type===r.BindingTypeEnum.Constructor)f=l.implementationType;else if(l.type===r.BindingTypeEnum.DynamicValue&&null!==l.dynamicValue)f=c("toDynamicValue",l.serviceIdentifier,(function(){return l.dynamicValue(e.parentContext)}));else if(l.type===r.BindingTypeEnum.Factory&&null!==l.factory)f=c("toFactory",l.serviceIdentifier,(function(){return l.factory(e.parentContext)}));else if(l.type===r.BindingTypeEnum.Provider&&null!==l.provider)f=c("toProvider",l.serviceIdentifier,(function(){return l.provider(e.parentContext)}));else{if(l.type!==r.BindingTypeEnum.Instance||null===l.implementationType){var _=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+_)}f=s.resolveInstance(l.implementationType,o,u(t))}return"function"==typeof l.onActivation&&(f=l.onActivation(e.parentContext,f)),d&&(l.cache=f,l.activated=!0),y&&null!==t&&!t.has(l.id)&&t.set(l.id,f),f}}};e.resolve=function(t){return u(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(4),o=n(0);e.resolveInstance=function(t,e,n){var a,s,c=null;if(e.length>0){var u=e.filter((function(t){return null!==t.target&&t.target.type===r.TargetTypeEnum.ConstructorArgument})).map(n);s=u,c=function(t,e,n){var i=e.filter((function(t){return null!==t.target&&t.target.type===r.TargetTypeEnum.ClassProperty})),o=i.map(n);return i.forEach((function(e,n){var i;i=e.target.name.value();var r=o[n];t[i]=r})),t}(c=new((a=t).bind.apply(a,[void 0].concat(s))),e,n)}else c=new t;return function(t,e){if(Reflect.hasMetadata(o.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(i.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,c),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(4),o=n(36),a=n(16),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(i.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(37),r=n(10),o=n(11),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(16),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.of=function(e,n){var i=new t;return i.bindings=e,i.middleware=n,i},t}();e.ContainerSnapshot=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(i.NULL_ARGUMENT);if(null==e)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(i.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(i.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,i){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(i,r):e._map.delete(i)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(i.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=function(t){this.id=i.id(),this.registry=t};e.ContainerModule=r;var o=function(t){this.id=i.id(),this.registry=t};e.AsyncContainerModule=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(0);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),r=n(6);e.tagged=function(t,e){return function(n,o,a){var s=new i.Metadata(t,e);"number"==typeof a?r.tagParameter(n,o,a,s):r.tagProperty(n,o,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6);e.named=function(t){return function(e,n,a){var s=new r.Metadata(i.NAMED_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6);e.optional=function(){return function(t,e,n){var a=new r.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(t,e,n,a):o.tagProperty(t,e,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(i.UNMANAGED_TAG,!0);o.tagParameter(t,e,n,a)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6);e.multiInject=function(t){return function(e,n,a){var s=new r.Metadata(i.MULTI_INJECT_TAG,t);"number"==typeof a?o.tagParameter(e,n,a,s):o.tagProperty(e,n,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(6);e.targetName=function(t){return function(e,n,a){var s=new r.Metadata(i.NAME_TAG,t);o.tagParameter(e,n,a,s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),r=n(0),o=n(3);e.postConstruct=function(){return function(t,e,n){var a=new o.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(1),c=n(5);let u=class{constructor(t){this._canvas=document.getElementById(t),this._engine=new BABYLON.Engine(this._canvas,!0)}start(){return a(this,void 0,void 0,(function*(){yield this._sceneBuilder.buildScene(this._canvas,this._engine),this._scene=this._sceneBuilder.scene,this._physicsProvider.enablePhysics(this._scene,!1),this._guiProvider.init(this._scene),this._makingMoveGui.init(this._scene),this._doRender(),this._gameController.startGame()}))}_doRender(){this._engine.runRenderLoop(()=>{this._scene.render()}),window.addEventListener("resize",()=>{this._engine.resize()})}};i([s.inject(c.TYPES.ISceneBuilder),r("design:type",Object)],u.prototype,"_sceneBuilder",void 0),i([s.inject(c.TYPES.IPhysicsProvider),r("design:type",Object)],u.prototype,"_physicsProvider",void 0),i([s.inject(c.TYPES.IGameController),r("design:type",Object)],u.prototype,"_gameController",void 0),i([s.inject(c.TYPES.IGuiProvider),r("design:type",Object)],u.prototype,"_guiProvider",void 0),i([s.inject(c.TYPES.IMakingMoveGui),r("design:type",Object)],u.prototype,"_makingMoveGui",void 0),u=i([s.injectable(),o(0,s.inject(c.TYPES.canvas_name)),r("design:paramtypes",[String])],u),e.Game=u},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);let o=class{buildRing(t,e,n,i,r){for(var o=[],a=2*Math.PI/r,s=n-e,c=2*n*Math.sin(a/2),u=e+s/2,p=0;p<r;p++){var h=BABYLON.MeshBuilder.CreateBox("box",{size:1},t),f=p*a;h.rotation.y=-f+.5*Math.PI,h.position.x=Math.cos(f)*u,h.position.z=Math.sin(f)*u,h.scaling.x=c,h.scaling.y=i,h.scaling.z=s,o.push(h)}return o}};o=i([r.injectable()],o),e.ComplexShapesBuilder=o},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const a=n(1),s=n(5);let c=class{get scene(){if(!this._scene)throw new Error("Scene is not built.");return this._scene.pointerX,this._scene}buildScene(t,e){return o(this,void 0,void 0,(function*(){return new Promise(n=>BABYLON.SceneLoader.Load("","crokinole.babylon",e,e=>e.executeWhenReady(()=>{this._scene=e,this._lightsProvider.provideLights(this._scene),this._cameraManager.setupCamera(t,this._scene),n(null)})))}))}};i([a.inject(s.TYPES.ILightsProvider),r("design:type",Object)],c.prototype,"_lightsProvider",void 0),i([a.inject(s.TYPES.ICameraManager),r("design:type",Object)],c.prototype,"_cameraManager",void 0),c=i([a.injectable()],c),e.CrokinoleSceneBuilder=c},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),a=n(5);let s=class{enablePhysics(t,e){t.enablePhysics(new BABYLON.Vector3(0,-9.81,0),new BABYLON.CannonJSPlugin);var n={mass:0,restitution:.6,friction:.005},i=[],r=this._complexShapesBuilder.buildRing(t,.17,3.35,.67,32);r.forEach(e=>e.physicsImpostor=new BABYLON.PhysicsImpostor(e,BABYLON.PhysicsImpostor.BoxImpostor,n,t)),i=i.concat(r);var o=BABYLON.MeshBuilder.CreateBox("holeFloor",{size:.4,height:.55},t);o.physicsImpostor=new BABYLON.PhysicsImpostor(o,BABYLON.PhysicsImpostor.BoxImpostor,n,t),i.push(o);var a=BABYLON.MeshBuilder.CreateCylinder("outerField",{height:.6,diameter:8.4,tessellation:14},t);a.position.y=-.15,a.rotation.y=Math.PI/14,a.physicsImpostor=new BABYLON.PhysicsImpostor(a,BABYLON.PhysicsImpostor.CylinderImpostor,n,t),i.push(a);for(var s=Math.PI/7,c=4,u=4.05,p=(c+u)/2,h=u-c,f=2*c*Math.sin(s/2),l=.75,d=0;d<14;d++){var y=d*s;(_=BABYLON.MeshBuilder.CreateBox("band",{size:1},t)).rotation.y=-y,_.position.x=Math.cos(y)*p,_.position.z=Math.sin(y)*p,_.scaling.x=h,_.scaling.y=l,_.scaling.z=f,_.physicsImpostor=new BABYLON.PhysicsImpostor(_,BABYLON.PhysicsImpostor.BoxImpostor,n,t),i.push(_)}s=Math.PI/4,c=.04,u=1.025,l=.2;for(d=0;d<8;d++){var _;y=d*s;(_=BABYLON.MeshBuilder.CreateCylinder("pin",{diameter:2*c,height:l,tessellation:32},t)).position.x=Math.cos(y)*u,_.position.y=.435,_.position.z=Math.sin(y)*u,_.physicsImpostor=new BABYLON.PhysicsImpostor(_,BABYLON.PhysicsImpostor.CylinderImpostor,n,t),i.push(_)}var v=v=new BABYLON.StandardMaterial("fieldMat",t);v.diffuseColor=new BABYLON.Color3(.2,1,.2),i.forEach(t=>{e?t.material=v:t.visibility=0})}};i([o.inject(a.TYPES.IComplexShapesBuilder),r("design:type",Object)],s.prototype,"_complexShapesBuilder",void 0),s=i([o.injectable()],s),e.CrokinolePhysicsProvider=s},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);let o=class{provideLights(t){new BABYLON.SpotLight("left",new BABYLON.Vector3(5,3.5,0),new BABYLON.Vector3(-1,-1,0),Math.PI/2,1,t).intensity=100,new BABYLON.SpotLight("right",new BABYLON.Vector3(-5,3.5,0),new BABYLON.Vector3(1,-1,0),Math.PI/2,1,t).intensity=100,new BABYLON.SpotLight("top",new BABYLON.Vector3(0,3.5,5),new BABYLON.Vector3(0,-1,-1),Math.PI/2,1,t).intensity=100,new BABYLON.SpotLight("bottom",new BABYLON.Vector3(0,3.5,-5),new BABYLON.Vector3(0,-1,1),Math.PI/2,1,t).intensity=100}};o=i([r.injectable()],o),e.CrokinoleLightsProvider=o},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1);let a=class{constructor(){this._defaultPosition=new BABYLON.Vector3(0,5,10),this._defaultTarget=new BABYLON.Vector3(0,.385,0)}setupCamera(t,e){this._camera||(this._camera=new BABYLON.ArcRotateCamera("Camera",0,0,0,this._defaultPosition,e),this._camera.setTarget(this._defaultTarget))}moveCamera(t){this._camera.setPosition(t)}resetCamera(){this._camera.position=this._defaultPosition,this._camera.setTarget(this._defaultTarget)}};a=i([o.injectable(),r("design:paramtypes",[])],a),e.CameraManager=a},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=this&&this.__param||function(t,e){return function(n,i){e(n,i,t)}},a=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const s=n(1),c=n(5),u=n(57),p=n(66);let h=class{constructor(t){this._playerFactory=t,this._whitePlayer=this._playerFactory.provideLocalPlayer("white"),this._blackPlayer=this._playerFactory.provideLocalPlayer("black"),this._gameState=new p.GameState([this._whitePlayer,this._blackPlayer]),this._gameEndedDispatcher=new u.SimpleEventDispatcher}get gameEndedEvent(){return this._gameEndedDispatcher.asEvent()}startGame(){return a(this,void 0,void 0,(function*(){for(;!this._gameState.isFinished();){var t=this._gameState.nextPlayer();yield t.move(),console.log(t.color+" player made a move")}}))}};h=i([s.injectable(),o(0,s.inject(c.TYPES.IPlayerFactory)),r("design:paramtypes",[Object])],h),e.GameController=h},function(t,e,n){"use strict";
/*!
 * Strongly Typed Events for TypeScript
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */Object.defineProperty(e,"__esModule",{value:!0});var i=n(9);e.DispatcherBase=i.DispatcherBase,e.DispatcherWrapper=i.DispatcherWrapper,e.EventListBase=i.EventListBase,e.Subscription=i.Subscription;var r=n(60);e.EventDispatcher=r.EventDispatcher,e.EventHandlingBase=r.EventHandlingBase,e.EventList=r.EventList,e.NonUniformEventList=r.NonUniformEventList;var o=n(62);e.SimpleEventDispatcher=o.SimpleEventDispatcher,e.SimpleEventHandlingBase=o.SimpleEventHandlingBase,e.SimpleEventList=o.SimpleEventList,e.NonUniformSimpleEventList=o.NonUniformSimpleEventList;var a=n(64);e.SignalDispatcher=a.SignalDispatcher,e.SignalHandlingBase=a.SignalHandlingBase,e.SignalList=a.SignalList},function(t,e,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0});var r=n(59),o=n(18),a=function(){function t(){this._wrap=new c(this),this._subscriptions=new Array}return Object.defineProperty(t.prototype,"count",{get:function(){return this._subscriptions.length},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){var e=this;return t&&this._subscriptions.push(new o.Subscription(t,!1)),function(){e.unsubscribe(t)}},t.prototype.sub=function(t){return this.subscribe(t)},t.prototype.one=function(t){var e=this;return t&&this._subscriptions.push(new o.Subscription(t,!0)),function(){e.unsubscribe(t)}},t.prototype.has=function(t){return!!t&&this._subscriptions.some((function(e){return e.handler==t}))},t.prototype.unsubscribe=function(t){if(t)for(var e=0;e<this._subscriptions.length;e++)if(this._subscriptions[e].handler==t){this._subscriptions.splice(e,1);break}},t.prototype.unsub=function(t){this.unsubscribe(t)},t.prototype._dispatch=function(t,e,n){for(var o=this,a=function(i){var a=new r.EventManagement((function(){return o.unsub(i.handler)})),c=Array.prototype.slice.call(n);if(c.push(a),i.execute(t,e,c),s.cleanup(i),!t&&a.propagationStopped)return"break"},s=this,c=0,u=i(this._subscriptions);c<u.length;c++){if("break"===a(u[c]))break}},t.prototype.cleanup=function(t){if(t.isOnce&&t.isExecuted){var e=this._subscriptions.indexOf(t);e>-1&&this._subscriptions.splice(e,1)}},t.prototype.asEvent=function(){return this._wrap},t.prototype.clear=function(){this._subscriptions.splice(0,this._subscriptions.length)},t}();e.DispatcherBase=a;var s=function(){function t(){this._events={}}return t.prototype.get=function(t){var e=this._events[t];return e||(e=this.createDispatcher(),this._events[t]=e,e)},t.prototype.remove=function(t){delete this._events[t]},t}();e.EventListBase=s;var c=function(){function t(t){this._subscribe=function(e){return t.subscribe(e)},this._unsubscribe=function(e){return t.unsubscribe(e)},this._one=function(e){return t.one(e)},this._has=function(e){return t.has(e)},this._clear=function(){return t.clear()},this._count=function(){return t.count}}return Object.defineProperty(t.prototype,"count",{get:function(){return this._count()},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){return this._subscribe(t)},t.prototype.sub=function(t){return this.subscribe(t)},t.prototype.unsubscribe=function(t){this._unsubscribe(t)},t.prototype.unsub=function(t){this.unsubscribe(t)},t.prototype.one=function(t){return this._one(t)},t.prototype.has=function(t){return this._has(t)},t.prototype.clear=function(){this._clear()},t}();e.DispatcherWrapper=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.unsub=t,this.propagationStopped=!1}return t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}();e.EventManagement=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(61);e.EventDispatcher=i.EventDispatcher,e.EventHandlingBase=i.EventHandlingBase,e.EventList=i.EventList,e.NonUniformEventList=i.NonUniformEventList},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.dispatch=function(t,e){this._dispatch(!1,this,arguments)},e.prototype.dispatchAsync=function(t,e){this._dispatch(!0,this,arguments)},e.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},e}(o.DispatcherBase);e.EventDispatcher=a;var s=function(){function t(){this._events={}}return t.prototype.get=function(t){if(this._events[t])return this._events[t];var e=this.createDispatcher();return this._events[t]=e,e},t.prototype.remove=function(t){delete this._events[t]},t.prototype.createDispatcher=function(){return new a},t}();e.NonUniformEventList=s;var c=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.createDispatcher=function(){return new a},e}(o.EventListBase);e.EventList=c;var u=function(){function t(){this._events=new c}return Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t,e){this._events.get(t).subscribe(e)},t.prototype.sub=function(t,e){this.subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._events.get(t).unsubscribe(e)},t.prototype.unsub=function(t,e){this.unsubscribe(t,e)},t.prototype.one=function(t,e){this._events.get(t).one(e)},t.prototype.has=function(t,e){return this._events.get(t).has(e)},t}();e.EventHandlingBase=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(63);e.SimpleEventDispatcher=i.SimpleEventDispatcher,e.SimpleEventHandlingBase=i.SimpleEventHandlingBase,e.SimpleEventList=i.SimpleEventList,e.NonUniformSimpleEventList=i.NonUniformSimpleEventList},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.dispatch=function(t){this._dispatch(!1,this,arguments)},e.prototype.dispatchAsync=function(t){this._dispatch(!0,this,arguments)},e.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},e}(o.DispatcherBase);e.SimpleEventDispatcher=a;var s=function(){function t(){this._events={}}return t.prototype.get=function(t){if(this._events[t])return this._events[t];var e=this.createDispatcher();return this._events[t]=e,e},t.prototype.remove=function(t){delete this._events[t]},t.prototype.createDispatcher=function(){return new a},t}();e.NonUniformSimpleEventList=s;var c=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.createDispatcher=function(){return new a},e}(o.EventListBase);e.SimpleEventList=c;var u=function(){function t(){this._events=new c}return Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t,e){this._events.get(t).subscribe(e)},t.prototype.sub=function(t,e){this.subscribe(t,e)},t.prototype.one=function(t,e){this._events.get(t).one(e)},t.prototype.has=function(t,e){return this._events.get(t).has(e)},t.prototype.unsubscribe=function(t,e){this._events.get(t).unsubscribe(e)},t.prototype.unsub=function(t,e){this.unsubscribe(t,e)},t}();e.SimpleEventHandlingBase=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(65);e.SignalDispatcher=i.SignalDispatcher,e.SignalHandlingBase=i.SignalHandlingBase,e.SignalList=i.SignalList},function(t,e,n){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),a=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.dispatch=function(){this._dispatch(!1,this,arguments)},e.prototype.dispatchAsync=function(){this._dispatch(!0,this,arguments)},e.prototype.asEvent=function(){return t.prototype.asEvent.call(this)},e}(o.DispatcherBase);e.SignalDispatcher=a;var s=function(t){function e(){return t.call(this)||this}return r(e,t),e.prototype.createDispatcher=function(){return new a},e}(o.EventListBase);e.SignalList=s;var c=function(){function t(){this._events=new s}return Object.defineProperty(t.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),t.prototype.one=function(t,e){this._events.get(t).one(e)},t.prototype.has=function(t,e){return this._events.get(t).has(e)},t.prototype.subscribe=function(t,e){this._events.get(t).subscribe(e)},t.prototype.sub=function(t,e){this.subscribe(t,e)},t.prototype.unsubscribe=function(t,e){this._events.get(t).unsubscribe(e)},t.prototype.unsub=function(t,e){this.unsubscribe(t,e)},t}();e.SignalHandlingBase=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GameState=class{constructor(t){this._players=t,this._nextPlayerIndex=0}nextPlayer(){return this._players[this._nextPlayerIndex]}isFinished(){return!1}}},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),a=n(5);let s=class{constructor(){this._isInit=!1,this._pointerActionObservables=new Map}registerOneCallPointerListener(t,e){this._lazyInit(),this._lazyCreatePointerActionObservable(t),this._pointerActionObservables.get(t).addOnce(e)}registerPointerListener(t,e){this._lazyInit(),this._lazyCreatePointerActionObservable(t),this._pointerActionObservables.get(t).add(e)}unregisterPointerListener(t,e){this._lazyInit(),this._lazyCreatePointerActionObservable(t),this._pointerActionObservables.get(t).removeCallback(e)}_pointerActionListener(t,e){this._pointerActionObservables.has(t.type)&&this._pointerActionObservables.get(t.type).notifyObservers(t)}_lazyInit(){this._isInit||(this._sceneProvider.scene.onPointerObservable.add(this._pointerActionListener.bind(this)),this._isInit=!0)}_lazyCreatePointerActionObservable(t){this._pointerActionObservables.has(t)||this._pointerActionObservables.set(t,new BABYLON.Observable)}};i([o.inject(a.TYPES.ISceneBuilder),r("design:type",Object)],s.prototype,"_sceneProvider",void 0),s=i([o.injectable(),r("design:paramtypes",[])],s),e.UserInput=s},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),a=n(5),s=n(69);let c=class{provideLocalPlayer(t){return new s.LocalPlayer(t,this._sceneProvider,this._cameraManager,this._userInput,this._makingMoveGui)}};i([o.inject(a.TYPES.ISceneBuilder),r("design:type",Object)],c.prototype,"_sceneProvider",void 0),i([o.inject(a.TYPES.IUserInput),r("design:type",Object)],c.prototype,"_userInput",void 0),i([o.inject(a.TYPES.ICameraManager),r("design:type",Object)],c.prototype,"_cameraManager",void 0),i([o.inject(a.TYPES.IMakingMoveGui),r("design:type",Object)],c.prototype,"_makingMoveGui",void 0),c=i([o.injectable()],c),e.PlayerFactory=c},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});e.LocalPlayer=class{constructor(t,e,n,i,r){this._color=t,this._sceneProvider=e,this._cameraManager=n,this._userInput=i,this._makingMoveGui=r,this._movingDiscRotationCentre=BABYLON.Vector3.Zero(),this._movingDiscRotationAxis=new BABYLON.Vector3(0,1,0),this._movingDiscRotationRadians=.01,this._choosingDirectionDefaultDirection=new BABYLON.Vector3(1,0,1)}get color(){return this._color}move(){return i(this,void 0,void 0,(function*(){yield new Promise(t=>{this._userInput.registerOneCallPointerListener(BABYLON.PointerEventTypes.POINTERDOWN,(e,n)=>{t()})});var t=this._createDisc();yield this._choosePosition(t);var e=yield this._chooseContactPoint(t),n=yield this._chooseDirection(t),i=yield this._chooseForce();yield new Promise(r=>{this._userInput.registerOneCallPointerListener(BABYLON.PointerEventTypes.POINTERDOWN,(o,a)=>{t.physicsImpostor.applyImpulse(n.multiplyByFloats(i,0,i),e),r()})}),this._cameraManager.resetCamera()}))}_choosePosition(t){return i(this,void 0,void 0,(function*(){var e=()=>this._moveDiscByRadians(t,this._movingDiscRotationRadians),n=()=>this._moveDiscByRadians(t,-this._movingDiscRotationRadians);yield new Promise(t=>{this._makingMoveGui.showChoosePositionGui(e,n,()=>t())})}))}_moveDiscByRadians(t,e){t.rotateAround(this._movingDiscRotationCentre,this._movingDiscRotationAxis,e),this._followDiscWithCamera(t)}_chooseContactPoint(t){return i(this,void 0,void 0,(function*(){var e=t.position,n=t=>e=t;return yield new Promise(e=>{this._makingMoveGui.showChooseContactPointGui(t,n,()=>e())}),e}))}_chooseDirection(t){return i(this,void 0,void 0,(function*(){this._cameraManager.moveCamera(new BABYLON.Vector3(0,10,0));var e=BABYLON.Vector3.ZeroReadOnly.subtract(t.position).normalize(),n=t=>e=t;return yield new Promise(i=>{this._makingMoveGui.showChooseDirectionGui(t,e,n,()=>i())}),e}))}_chooseForce(){return i(this,void 0,void 0,(function*(){var t=3,e=e=>t=e;return yield new Promise(t=>{this._makingMoveGui.showChooseForceGui(e,()=>t())}),t}))}_createDisc(){var t=BABYLON.MeshBuilder.CreateCylinder("disc",{height:.1,diameter:.32,tessellation:32},this._sceneProvider.scene);return t.position.y=.385,t.position.x=3.19,t.material=this._sceneProvider.scene.getMaterialByID("Material.002"),t.physicsImpostor=new BABYLON.PhysicsImpostor(t,BABYLON.PhysicsImpostor.CylinderImpostor,{mass:1,restitution:.6,friction:.005},this._sceneProvider.scene),this._followDiscWithCamera(t),t}_followDiscWithCamera(t){this._cameraManager.moveCamera(t.position.add(t.position.subtract(this._movingDiscRotationCentre).normalize().multiplyByFloats(2,2,2)))}}},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);let o=class{init(t){this._guiCanvas=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("crokinole",!0,t)}attachControl(t){this._guiCanvas.addControl(t)}detachControl(t){this._guiCanvas.removeControl(t)}};o=i([r.injectable()],o),e.GuiProvider=o},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});const o=n(1),a=n(5);let s=class{init(t){this._scene=t,this._constructChoosePositionGui(),this._constructChooseContactPointGui(),this._constructChooseDirectionGui(),this._constructChooseForceGui()}showChoosePositionGui(t,e,n){var i,r;this._guiProvider.attachControl(this._choosePositionGui),this._moveLeft.onPointerDownObservable.add((e,n)=>{i=setInterval(()=>t(),25)}),this._moveLeft.onPointerUpObservable.add((t,e)=>{clearInterval(i)}),this._moveRight.onPointerDownObservable.add((t,n)=>{r=setInterval(()=>e(),25)}),this._moveRight.onPointerUpObservable.add((t,e)=>{clearInterval(r)}),this._accept.onPointerUpObservable.addOnce((t,e)=>{this._moveLeft.onPointerDownObservable.clear(),this._moveLeft.onPointerUpObservable.clear(),this._moveRight.onPointerDownObservable.clear(),this._moveRight.onPointerUpObservable.clear(),this._guiProvider.detachControl(this._choosePositionGui),n()})}showChooseContactPointGui(t,e,n){var i;this._contactPointMarker.position=t.position,this._contactPointMarker.isVisible=!0;var r=(n,r)=>{(i=this._scene.pick(this._scene.pointerX,this._scene.pointerY,e=>e==t)).hit&&(this._contactPointMarker.position=i.pickedPoint,e(i.pickedPoint))};this._userInput.registerPointerListener(BABYLON.PointerEventTypes.POINTERMOVE,r),this._userInput.registerOneCallPointerListener(BABYLON.PointerEventTypes.POINTERDOWN,(t,e)=>{this._userInput.unregisterPointerListener(BABYLON.PointerEventTypes.POINTERMOVE,r),this._contactPointMarker.isVisible=!1,this._contactPointMarker.position=BABYLON.Vector3.ZeroReadOnly,n()})}showChooseDirectionGui(t,e,n,i){var r;this._mousePicker.position.y=t.position.y,this._directionIndicator.position=t.position,this._rotateDirectionIndicator(e),this._setDirectionIndicatorVisibility(!0);var o=(e,i)=>{if((r=this._scene.pick(this._scene.pointerX,this._scene.pointerY,t=>t==this._mousePicker)).hit&&!r.pickedPoint.equals(t.position)){var o=r.pickedPoint.subtract(t.position);this._rotateDirectionIndicator(o),n(o)}};this._userInput.registerPointerListener(BABYLON.PointerEventTypes.POINTERMOVE,o),this._userInput.registerOneCallPointerListener(BABYLON.PointerEventTypes.POINTERDOWN,(t,e)=>{this._userInput.unregisterPointerListener(BABYLON.PointerEventTypes.POINTERMOVE,o),this._setDirectionIndicatorVisibility(!1),i()})}_setDirectionIndicatorVisibility(t){this._directionIndicator.isVisible=t,this._directionIndicator.getChildMeshes().forEach(e=>e.isVisible=t)}_rotateDirectionIndicator(t){var e=this._directionIndicatorPointer.position.subtract(this._directionIndicator.position);this._directionIndicator.rotateAround(this._directionIndicator.position,this._rotationAxis,Math.atan2(BABYLON.Vector3.Cross(t,e).length(),BABYLON.Vector3.Dot(t,e)))}showChooseForceGui(t,e){e()}_constructChoosePositionGui(){var t=new BABYLON.GUI.Grid;t.width=.5,t.addColumnDefinition(.3),t.addColumnDefinition(10,!0),t.addColumnDefinition(.3),t.addColumnDefinition(10,!0),t.addColumnDefinition(.3),this._moveLeft=BABYLON.GUI.Button.CreateSimpleButton("moveLeft","Left"),this._moveLeft.height="50px",this._moveLeft.color="white",this._moveLeft.background="green",t.addControl(this._moveLeft,0,0),this._accept=BABYLON.GUI.Button.CreateSimpleButton("accept","Accept"),this._accept.height="50px",this._accept.color="white",this._accept.background="green",t.addControl(this._accept,0,2),this._moveRight=BABYLON.GUI.Button.CreateSimpleButton("moveRight","Right"),this._moveRight.height="50px",this._moveRight.color="white",this._moveRight.background="green",t.addControl(this._moveRight,0,4),this._choosePositionGui=t}_constructChooseContactPointGui(){this._contactPointMarker=BABYLON.MeshBuilder.CreateSphere("red",{diameter:.05},this._scene);var t=new BABYLON.StandardMaterial("redmat",this._scene);t.diffuseColor=new BABYLON.Color3(.4,.4,.4),this._contactPointMarker.material=t,this._contactPointMarker.isVisible=!1}_constructChooseDirectionGui(){this._mousePicker=BABYLON.MeshBuilder.CreateGround("ground",{width:100,height:100},this._scene),this._mousePicker.isVisible=!1;var t=BABYLON.MeshBuilder.CreateCylinder("ring",{height:.005,diameter:.4,tessellation:32},this._scene);this._directionIndicatorPointer=BABYLON.MeshBuilder.CreateBox("pointer",{width:.4,depth:.02,height:.005},this._scene),this._directionIndicatorPointer.position=t.position.add(new BABYLON.Vector3(.2,0,0)),this._directionIndicator=new BABYLON.Mesh("directionIndicator",this._scene),this._directionIndicator.addChild(t),this._directionIndicator.addChild(this._directionIndicatorPointer),this._setDirectionIndicatorVisibility(!1),this._rotationAxis=new BABYLON.Vector3(0,1,0)}_constructChooseForceGui(){}};i([o.inject(a.TYPES.IGuiProvider),r("design:type",Object)],s.prototype,"_guiProvider",void 0),i([o.inject(a.TYPES.IUserInput),r("design:type",Object)],s.prototype,"_userInput",void 0),s=i([o.injectable()],s),e.MakingMoveGui=s},function(t,e,n){"use strict";var i=this&&this.__decorate||function(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});const r=n(1);let o=class{};o=i([r.injectable()],o),e.VectorMathHelper=o}]);