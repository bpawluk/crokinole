!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.METADATA_KEY=i;var r=n(22);t.Container=r.Container;var o=n(5);t.BindingScopeEnum=o.BindingScopeEnum,t.BindingTypeEnum=o.BindingTypeEnum,t.TargetTypeEnum=o.TargetTypeEnum;var a=n(38);t.AsyncContainerModule=a.AsyncContainerModule,t.ContainerModule=a.ContainerModule;var s=n(39);t.injectable=s.injectable;var c=n(40);t.tagged=c.tagged;var u=n(41);t.named=u.named;var l=n(13);t.inject=l.inject,t.LazyServiceIdentifer=l.LazyServiceIdentifer;var d=n(42);t.optional=d.optional;var h=n(43);t.unmanaged=h.unmanaged;var f=n(44);t.multiInject=f.multiInject;var p=n(45);t.targetName=p.targetName;var _=n(46);t.postConstruct=_.postConstruct;var y=n(11);t.MetadataReader=y.MetadataReader;var g=n(7);t.id=g.id;var v=n(6);t.decorate=v.decorate;var m=n(16);t.traverseAncerstors=m.traverseAncerstors,t.taggedConstraint=m.taggedConstraint,t.namedConstraint=m.namedConstraint,t.typeConstraint=m.typeConstraint;var b=n(8);t.getServiceIdentifierAsString=b.getServiceIdentifierAsString;var P=n(47);t.multiBindToService=P.multiBindToService},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPES={Game:Symbol.for("Game"),canvas_name:Symbol.for("canvas_name"),config_path:Symbol.for("config_path"),IConfigProvider:Symbol.for("IConfigProvider"),IGameController:Symbol.for("IGameController"),IPlayerFactory:Symbol.for("IPlayerFactory"),IPawnProvider:Symbol.for("IPawnProvider"),IPawnPositionHelper:Symbol.for("IPawnPositionHelper"),IGuiProvider:Symbol.for("IGuiProvider"),IMakingMoveGui:Symbol.for("IMakingMoveGui"),IGameStateGui:Symbol.for("IGameStateGui"),IMenuGui:Symbol.for("IMenuGui"),ICacheManager:Symbol.for("ICacheManager"),IComplexShapesBuilder:Symbol.for("IComplexShapesBuilder"),IFramesTimer:Symbol.for("IFramesTimer"),IHttpRequestSender:Symbol.for("IHttpRequestSender"),IPointerEventsManager:Symbol.for("IPointerEventsManager"),ICameraManager:Symbol.for("ICameraManager"),ISceneBuilder:Symbol.for("ISceneBuilder"),ILightsProvider:Symbol.for("ILightsProvider"),ILoadingScreen:Symbol.for("ILoadingScreen"),IMaterialsProvider:Symbol.for("IMaterialsProvider"),IPhysicsProvider:Symbol.for("IPhysicsProvider"),ISkyboxBuilder:Symbol.for("ISkyboxBuilder"),ITexturePainter:Symbol.for("ITexturePainter")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(1);function o(e,t,n,r,o){var a={},s="number"==typeof o,c=void 0!==o&&s?o.toString():n;if(s&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var u=a[c];if(Array.isArray(u))for(var l=0,d=u;l<d.length;l++){var h=d[l];if(h.key===r.key)throw new Error(i.DUPLICATED_METADATA+" "+h.key.toString())}else u=[];u.push(r),a[c]=u,Reflect.defineMetadata(e,a,t)}function a(e,t){Reflect.decorate(e,t)}function s(e,t){return function(n,i){t(n,i,e)}}t.tagParameter=function(e,t,n,i){o(r.TAGGED,e,t,i,n)},t.tagProperty=function(e,t,n){o(r.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?a([s(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):a([e],t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.id=function(){return i++}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);function r(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=r,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var i="",r=n(e,t);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(e){var t="Object";null!==e.implementationType&&(t=o(e.implementationType)),i=i+"\n "+t,e.constraint.metaData&&(i=i+" - "+e.constraint.metaData)}))),i},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(function e(t,n){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===n||e(t.parentRequest,n))}(t,t.serviceIdentifier)){var n=function(e){return function e(t,n){void 0===n&&(n=[]);var i=r(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}(e).reverse().join(" --\x3e ")}(t);throw new Error(i.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",i=t.getNamedTag(),r=t.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new i.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(16),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=r.namedConstraint(e),new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=r.taggedConstraint(e)(t),new i.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return r.typeConstraint(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return r.namedConstraint(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return r.taggedConstraint(e)(t)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,r.typeConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,r.typeConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,r.namedConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,r.namedConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,e)},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,e)},new i.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(i.TAGGED_PROP,e)||[]},e}();t.MetadataReader=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===i.STACK_OVERFLOW}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(1),o=n(4),a=n(6),s=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=s,t.inject=function(e){return function(t,n,s){if(void 0===e)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(r.INJECT_TAG,e);"number"==typeof s?a.tagParameter(t,n,s,c):a.tagProperty(t,n,c)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(7),o=n(4),a=n(29),s=function(){function e(e,t,n,s){this.id=r.id(),this.type=e,this.serviceIdentifier=n,this.name=new a.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof s?c=new o.Metadata(i.NAMED_TAG,s):s instanceof o.Metadata&&(c=s),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(i.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return e.key!==i.INJECT_TAG&&e.key!==i.MULTI_INJECT_TAG&&e.key!==i.NAME_TAG&&e.key!==i.UNMANAGED_TAG&&e.key!==i.NAMED_TAG}))},e.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===i.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return e.key!==i.INJECT_TAG&&e.key!==i.MULTI_INJECT_TAG&&e.key!==i.NAME_TAG&&e.key!==i.UNMANAGED_TAG&&e.key!==i.NAMED_TAG})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(i.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var i=0,r=t.metadata;i<r.length;i++){var o=r[i];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=n(10),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var a=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new r.Metadata(e,t),n}};t.taggedConstraint=a;var s=a(i.NAMED_TAG);t.namedConstraint=s;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var i=t.bindings[0].implementationType;return e===i}return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(18),r=n(2);window.addEventListener("DOMContentLoaded",()=>i.gameDependencyContainer.get(r.TYPES.Game).start())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(19);const i=n(0),r=n(2),o=n(48),a=n(49),s=n(50),c=n(51),u=n(52),l=n(53),d=n(54),h=n(57),f=n(58),p=n(60),_=n(61),y=n(63),g=n(64),v=n(65),m=n(67),b=n(68),P=n(69),w=n(71),O=n(72),T=n(73),I=n(74),S=n(75),A=n(76),B=new i.Container;t.gameDependencyContainer=B,B.bind(r.TYPES.Game).to(o.Game).inSingletonScope(),B.bind(r.TYPES.canvas_name).toConstantValue("game"),B.bind(r.TYPES.config_path).toConstantValue("game-config.json"),B.bind(r.TYPES.IConfigProvider).to(b.OnlineConfigProvider).inSingletonScope(),B.bind(r.TYPES.IGameController).to(d.GameController),B.bind(r.TYPES.IPlayerFactory).to(f.PlayerFactory),B.bind(r.TYPES.IPawnProvider).to(v.PawnProvider).inSingletonScope(),B.bind(r.TYPES.IPawnPositionHelper).to(m.PawnPositionHelper),B.bind(r.TYPES.IGuiProvider).to(p.GuiProvider).inSingletonScope(),B.bind(r.TYPES.IMakingMoveGui).to(_.MakingMoveGui).inSingletonScope(),B.bind(r.TYPES.IGameStateGui).to(y.GameStateGui).inSingletonScope(),B.bind(r.TYPES.IMenuGui).to(g.MenuGui).inSingletonScope(),B.bind(r.TYPES.ICacheManager).to(w.MemoryCacheManager).inSingletonScope(),B.bind(r.TYPES.IComplexShapesBuilder).to(a.ComplexShapesBuilder),B.bind(r.TYPES.IFramesTimer).to(A.FramesTimer).inSingletonScope(),B.bind(r.TYPES.IHttpRequestSender).to(P.HttpRequestSender),B.bind(r.TYPES.IPointerEventsManager).to(h.PointerEventsManager).inSingletonScope(),B.bind(r.TYPES.ICameraManager).to(l.CrokinoleCameraManager).inSingletonScope(),B.bind(r.TYPES.ILightsProvider).to(u.CrokinoleLightsProvider),B.bind(r.TYPES.ILoadingScreen).to(T.CrokinoleLoadingScreen),B.bind(r.TYPES.IMaterialsProvider).to(I.StandardMaterialsProvider),B.bind(r.TYPES.IPhysicsProvider).to(c.CrokinolePhysicsProvider),B.bind(r.TYPES.ISceneBuilder).to(s.SceneBuilder).inSingletonScope(),B.bind(r.TYPES.ISkyboxBuilder).to(S.SkyboxBuilder),B.bind(r.TYPES.ITexturePainter).to(O.TexturePainter)},function(e,t,n){(function(e,t){
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n;!function(n){!function(i){var r="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=a(n);function a(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===r.Reflect?r.Reflect=n:o=a(r.Reflect,o),function(t){var n=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,r=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",a="function"==typeof Object.create,s={__proto__:[]}instanceof Array,c=!a&&!s,u={create:a?function(){return R(Object.create(null))}:s?function(){return R({__proto__:null})}:function(){return R({})},has:c?function(e,t){return n.call(e,t)}:function(e,t){return t in e},get:c?function(e,t){return n.call(e,t)?e[t]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"==typeof e&&e.env&&"true"===e.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,r)},t.prototype.entries=function(){return new n(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function r(e,t){return t}function a(e,t){return[e,t]}}():Map,f=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,p=new(d||"function"!=typeof WeakMap?function(){var e=u.create(),t=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=r(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=r(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return r(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=r(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var t;do{t="@@WeakMap@@"+a()}while(u.has(e,t));return e[t]=!0,t}function r(e,i){if(!n.call(e,t)){if(!i)return;Object.defineProperty(e,t,{value:u.create()})}return e[t]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<16;++i){var r=t[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}():WeakMap);function _(e,t,n){var i=p.get(e);if(P(i)){if(!n)return;i=new h,p.set(e,i)}var r=i.get(t);if(P(r)){if(!n)return;r=new h,i.set(t,r)}return r}function y(e,t,n){var i=_(t,n,!1);return!P(i)&&!!i.has(e)}function g(e,t,n){var i=_(t,n,!1);if(!P(i))return i.get(e)}function v(e,t,n,i){_(n,i,!0).set(e,t)}function m(e,t){var n=[],i=_(e,t,!1);if(P(i))return n;for(var r=function(e){var t=M(e,o);if(!A(t))throw new TypeError;var n=t.call(e);if(!O(n))throw new TypeError;return n}(i.keys()),a=0;;){var s=C(r);if(!s)return n.length=a,n;var c=s.value;try{n[a]=c}catch(e){try{N(r)}finally{throw e}}a++}}function b(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function P(e){return void 0===e}function w(e){return null===e}function O(e){return"object"==typeof e?null!==e:"function"==typeof e}function T(e,t){switch(b(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=M(e,r);if(void 0!==i){var o=i.call(e,n);if(O(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(A(n))if(!O(r=n.call(e)))return r;if(A(i=e.valueOf))if(!O(r=i.call(e)))return r}else{var i;if(A(i=e.valueOf))if(!O(r=i.call(e)))return r;var r,o=e.toString;if(A(o))if(!O(r=o.call(e)))return r}throw new TypeError}(e,"default"===n?"number":n)}function I(e){var t=T(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function S(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function A(e){return"function"==typeof e}function B(e){return"function"==typeof e}function M(e,t){var n=e[t];if(null!=n){if(!A(n))throw new TypeError;return n}}function C(e){var t=e.next();return!t.done&&t}function N(e){var t=e.return;t&&t.call(e)}function E(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function R(e){return e.__=void 0,delete e.__,e}t("decorate",(function(e,t,n,i){if(P(n)){if(!S(e))throw new TypeError;if(!B(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!P(i)&&!w(i)){if(!B(i))throw new TypeError;t=i}}return t}(e,t)}if(!S(e))throw new TypeError;if(!O(t))throw new TypeError;if(!O(i)&&!P(i)&&!w(i))throw new TypeError;return w(i)&&(i=void 0),function(e,t,n,i){for(var r=e.length-1;r>=0;--r){var o=(0,e[r])(t,n,i);if(!P(o)&&!w(o)){if(!O(o))throw new TypeError;i=o}}return i}(e,t,n=I(n),i)})),t("metadata",(function(e,t){return function(n,i){if(!O(n))throw new TypeError;if(!P(i)&&!function(e){switch(b(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;v(e,t,n,i)}})),t("defineMetadata",(function(e,t,n,i){if(!O(n))throw new TypeError;return P(i)||(i=I(i)),v(e,t,n,i)})),t("hasMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=I(n)),function e(t,n,i){if(y(t,n,i))return!0;var r=E(n);return!w(r)&&e(t,r,i)}(e,t,n)})),t("hasOwnMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=I(n)),y(e,t,n)})),t("getMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=I(n)),function e(t,n,i){if(y(t,n,i))return g(t,n,i);var r=E(n);return w(r)?void 0:e(t,r,i)}(e,t,n)})),t("getOwnMetadata",(function(e,t,n){if(!O(t))throw new TypeError;return P(n)||(n=I(n)),g(e,t,n)})),t("getMetadataKeys",(function(e,t){if(!O(e))throw new TypeError;return P(t)||(t=I(t)),function e(t,n){var i=m(t,n),r=E(t);if(null===r)return i;var o=e(r,n);if(o.length<=0)return i;if(i.length<=0)return o;for(var a=new f,s=[],c=0,u=i;c<u.length;c++){var l=u[c];a.has(l)||(a.add(l),s.push(l))}for(var d=0,h=o;d<h.length;d++){l=h[d];a.has(l)||(a.add(l),s.push(l))}return s}(e,t)})),t("getOwnMetadataKeys",(function(e,t){if(!O(e))throw new TypeError;return P(t)||(t=I(t)),m(e,t)})),t("deleteMetadata",(function(e,t,n){if(!O(t))throw new TypeError;P(n)||(n=I(n));var i=_(t,n,!1);if(P(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=p.get(t);return r.delete(n),r.size>0||p.delete(t),!0}))}(o)}()}(n||(n={}))}).call(this,n(20),n(21))},function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,u=[],l=!1,d=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function _(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=_,r.addListener=_,r.once=_,r.off=_,r.removeListener=_,r.removeAllListeners=_,r.emit=_,r.prependListener=_,r.prependOnceListener=_,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),a=n(3),s=n(5),c=n(1),u=n(11),l=n(24),d=n(31),h=n(33),f=n(7),p=n(8),_=n(36),y=n(37),g=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=s.BindingScopeEnum.Transient;else if(t.defaultScope!==s.BindingScopeEnum.Singleton&&t.defaultScope!==s.BindingScopeEnum.Transient&&t.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new y.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return e.merge=function(t,n){var i=new e,r=l.getBindingDictionary(i),o=l.getBindingDictionary(t),a=l.getBindingDictionary(n);function s(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return s(o,r),s(a,r),i},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=e;i<r.length;i++){var o=r[i],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,void 0,void 0,(function(){var t,n,i,o,a;return r(this,(function(r){switch(r.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,i=e,r.label=1;case 1:return n<i.length?(o=i[n],a=t(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=function(e){return function(t){return t.moduleId===e}};t.forEach((function(t){var n=i(t.id);e._bindingDictionary.removeByCondition(n)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new o.Binding(e,t);return this._bindingDictionary.add(e,n),new h.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(a.CANNOT_UNBIND+" "+p.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new y.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e),o=l.createMockRequest(this,e,t,n);i=r.some((function(e){return e.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,t,n)),i},e.prototype.snapshot=function(){this._snapshots.push(_.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,s.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,s.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(i){var r=e.rebind.bind(e)(i);return t(r,n),r}};return function(i){return{bindFunction:(r=i,function(n){var i=e.bind.bind(e)(n);return t(i,r),i}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(i),unbindFunction:function(t){e.unbind.bind(e)(t)}};var r}},e.prototype._get=function(e,t,n,i,r,o){var s=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:r,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(null==(s=this._middleware(c)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else s=this._planAndResolve()(c);return s},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=l.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),d.resolve(n)}},e}();t.Container=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=n(7),o=function(){function e(e,t){this.id=r.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),r=n(3),o=n(5),a=n(1),s=n(12),c=n(8),u=n(26),l=n(4),d=n(27),h=n(28),f=n(30),p=n(14);function _(e){return e._bindingDictionary}function y(e,t,n,o,a){var s=g(n.container,a.serviceIdentifier),u=[];return s.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&e.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),s=g(n.container,a.serviceIdentifier)),u=t?s:s.filter((function(e){var t=new f.Request(e.serviceIdentifier,n,o,e,a);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var a=c.getServiceIdentifierAsString(e),s=r.NOT_REGISTERED;throw s+=c.listMetadataForTarget(a,n),s+=c.listRegisteredBindingsForServiceIdentifier(o,a,g),new Error(s);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;a=c.getServiceIdentifierAsString(e),s=r.AMBIGUOUS_MATCH+" "+a;throw s+=c.listRegisteredBindingsForServiceIdentifier(o,a,g),new Error(s)}}(a.serviceIdentifier,u,a,n.container),u}function g(e,t){var n=[],i=_(e);return i.hasKey(t)?n=i.get(t):null!==e.parent&&(n=g(e.parent,t)),n}t.getBindingDictionary=_,t.plan=function(e,t,n,i,_,g,v,m){void 0===m&&(m=!1);var b=new u.Context(t),P=function(e,t,n,i,r,o){var s=e?a.MULTI_INJECT_TAG:a.INJECT_TAG,c=new l.Metadata(s,n),u=new p.Target(t,i,n,c);if(void 0!==r){var d=new l.Metadata(r,o);u.metadata.push(d)}return u}(n,i,_,"",g,v);try{return function e(t,n,i,a,s,c){var u,l;if(null===s){u=y(t,n,a,null,c),l=new f.Request(i,a,null,u,c);var p=new d.Plan(a,l);a.addPlan(p)}else u=y(t,n,a,s,c),l=s.addChildRequest(c.serviceIdentifier,u,c);u.forEach((function(n){var i=null;if(c.isArray())i=l.addChildRequest(n.serviceIdentifier,n,c);else{if(n.cache)return;i=l}if(n.type===o.BindingTypeEnum.Instance&&null!==n.implementationType){var s=h.getDependencies(t,n.implementationType);if(!a.container.options.skipBaseClassChecks){var u=h.getBaseClassDependencyCount(t,n.implementationType);if(s.length<u){var d=r.ARGUMENTS_LENGTH_MISMATCH(h.getFunctionName(n.implementationType));throw new Error(d)}}s.forEach((function(n){e(t,!1,n.serviceIdentifier,a,i,n)}))}}))}(e,m,_,b,null,P),b}catch(e){throw s.isStackOverflowExeption(e)&&b.plan&&c.circularDependencyToException(b.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,i){var r=new p.Target(o.TargetTypeEnum.Variable,"",t,new l.Metadata(n,i)),a=new u.Context(e);return new f.Request(t,a,null,[],r)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=function(){function e(e){this.id=i.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){this.parentContext=e,this.rootRequest=t};t.Plan=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),r=n(3),o=n(5),a=n(1),s=n(8);t.getFunctionName=s.getFunctionName;var c=n(14);function u(e,t,n,i){var a=e.getConstructorMetadata(n),s=a.compilerGeneratedMetadata;if(void 0===s){var u=r.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(u)}var h=a.userGeneratedMetadata,f=Object.keys(h),p=function(e,t,n,i,r){for(var o=[],a=0;a<r;a++){var s=l(a,e,t,n,i);null!==s&&o.push(s)}return o}(i,t,s,h,0===n.length&&f.length>0?f.length:n.length),_=function e(t,n){for(var i=t.getPropertiesMetadata(n),r=[],a=Object.keys(i),s=0,u=a;s<u.length;s++){var l=u[s],h=i[l],f=d(i[l]),p=f.targetName||l,_=f.inject||f.multiInject,y=new c.Target(o.TargetTypeEnum.ClassProperty,p,_);y.metadata=h,r.push(y)}var g=Object.getPrototypeOf(n.prototype).constructor;if(g!==Object){var v=e(t,g);r=r.concat(v)}return r}(e,n);return p.concat(_)}function l(e,t,n,a,s){var u=s[e.toString()]||[],l=d(u),h=!0!==l.unmanaged,f=a[e],p=l.inject||l.multiInject;if((f=p||f)instanceof i.LazyServiceIdentifer&&(f=f.unwrap()),h){if(!t&&(f===Object||f===Function||void 0===f)){var _=r.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(_)}var y=new c.Target(o.TargetTypeEnum.ConstructorArgument,l.targetName,f);return y.metadata=u,y}return null}function d(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[a.INJECT_TAG],multiInject:t[a.MULTI_INJECT_TAG],targetName:t[a.NAME_TAG],unmanaged:t[a.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return u(e,s.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=u(t,s.getFunctionName(i),i,!0),o=r.map((function(e){return e.metadata.filter((function(e){return e.key===a.UNMANAGED_TAG}))})),c=[].concat.apply([],o).length,l=r.length-c;return l>0?l:e(t,i)}return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=function(){function e(e,t,n,r,o){this.id=i.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,i){var r=new e(t,this.parentContext,this,n,i);return this.childRequests.push(r),r},e}();t.Request=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(5),o=n(12),a=n(8),s=n(32),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},u=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,l=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(l&&d)return o.map((function(t){return u(e)(t)}));var h=null;if(!t.target.isOptional()||0!==n.length){var f=n[0],p=f.scope===r.BindingScopeEnum.Singleton,_=f.scope===r.BindingScopeEnum.Request;if(p&&f.activated)return f.cache;if(_&&null!==e&&e.has(f.id))return e.get(f.id);if(f.type===r.BindingTypeEnum.ConstantValue)h=f.cache;else if(f.type===r.BindingTypeEnum.Function)h=f.cache;else if(f.type===r.BindingTypeEnum.Constructor)h=f.implementationType;else if(f.type===r.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)h=c("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(t.parentContext)}));else if(f.type===r.BindingTypeEnum.Factory&&null!==f.factory)h=c("toFactory",f.serviceIdentifier,(function(){return f.factory(t.parentContext)}));else if(f.type===r.BindingTypeEnum.Provider&&null!==f.provider)h=c("toProvider",f.serviceIdentifier,(function(){return f.provider(t.parentContext)}));else{if(f.type!==r.BindingTypeEnum.Instance||null===f.implementationType){var y=a.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+y)}h=s.resolveInstance(f.implementationType,o,u(e))}return"function"==typeof f.onActivation&&(h=f.onActivation(t.parentContext,h)),p&&(f.cache=h,f.activated=!0),_&&null!==e&&!e.has(f.id)&&e.set(f.id,h),h}}};t.resolve=function(e){return u(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(5),o=n(1);t.resolveInstance=function(e,t,n){var a,s,c=null;if(t.length>0){var u=t.filter((function(e){return null!==e.target&&e.target.type===r.TargetTypeEnum.ConstructorArgument})).map(n);s=u,c=function(e,t,n){var i=t.filter((function(e){return null!==e.target&&e.target.type===r.TargetTypeEnum.ClassProperty})),o=i.map(n);return i.forEach((function(t,n){var i;i=t.target.name.value();var r=o[n];e[i]=r})),e}(c=new((a=e).bind.apply(a,[void 0].concat(s))),t,n)}else c=new e;return function(e,t){if(Reflect.hasMetadata(o.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,c),c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(5),o=n(34),a=n(15),s=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=e,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=e,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(i.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=r.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new a.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=e,new a.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(35),r=n(9),o=n(10),a=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),r=n(15),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.of=function(t,n){var i=new e;return i.bindings=t,i.middleware=n,i},e}();t.ContainerSnapshot=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(i.NULL_ARGUMENT);if(null==t)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(i.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(i.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,i){var r=n.filter((function(t){return!e(t)}));r.length>0?t._map.set(i,r):t._map.delete(i)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=function(e){this.id=i.id(),this.registry=e};t.ContainerModule=r;var o=function(e){this.id=i.id(),this.registry=e};t.AsyncContainerModule=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(1);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,e))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(r.PARAM_TYPES,t,e),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n(6);t.tagged=function(e,t){return function(n,o,a){var s=new i.Metadata(e,t);"number"==typeof a?r.tagParameter(n,o,a,s):r.tagProperty(n,o,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=n(6);t.named=function(e){return function(t,n,a){var s=new r.Metadata(i.NAMED_TAG,e);"number"==typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=n(6);t.optional=function(){return function(e,t,n){var a=new r.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,a):o.tagProperty(e,t,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=n(6);t.unmanaged=function(){return function(e,t,n){var a=new r.Metadata(i.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,a)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=n(6);t.multiInject=function(e){return function(t,n,a){var s=new r.Metadata(i.MULTI_INJECT_TAG,e);"number"==typeof a?o.tagParameter(t,n,a,s):o.tagProperty(t,n,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(4),o=n(6);t.targetName=function(e){return function(t,n,a){var s=new r.Metadata(i.NAME_TAG,e);o.tagParameter(t,n,a,s)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n(1),o=n(4);t.postConstruct=function(){return function(e,t,n){var a=new o.Metadata(r.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,e.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,e.constructor)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},a=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(0),c=n(2);let u=class{constructor(e){this._canvas=document.getElementById(e),this._engine=new BABYLON.Engine(this._canvas,!0)}start(){return a(this,void 0,void 0,(function*(){this._engine.loadingScreen=this._loadingScreen,this._loadingScreen.displayLoadingUI(),this._fps=document.getElementById("fps"),yield this._configProvider.init(),yield this._sceneBuilder.buildScene(this._canvas,this._engine),this._scene=this._sceneBuilder.scene,this._physicsProvider.enablePhysics(this._scene,!1),yield this._initServices(),this._doRender(),this._menuGui.showMainMenu(()=>this._gameController.startGame()),this._loadingScreen.hideLoadingUI()}))}_initServices(){return a(this,void 0,void 0,(function*(){this._pawnProvider.init(this._scene),this._guiProvider.init(this._scene),this._makingMoveGui.init(this._scene),this._frameTimer.init(this._scene)}))}_doRender(){this._engine.runRenderLoop(()=>{this._scene.render(),this._fps.innerHTML=this._engine.getFps().toFixed()+" fps"}),window.addEventListener("resize",()=>{this._engine.resize()})}};i([s.inject(c.TYPES.ILoadingScreen),r("design:type",Object)],u.prototype,"_loadingScreen",void 0),i([s.inject(c.TYPES.ISceneBuilder),r("design:type",Object)],u.prototype,"_sceneBuilder",void 0),i([s.inject(c.TYPES.IPhysicsProvider),r("design:type",Object)],u.prototype,"_physicsProvider",void 0),i([s.inject(c.TYPES.IGameController),r("design:type",Object)],u.prototype,"_gameController",void 0),i([s.inject(c.TYPES.IPawnProvider),r("design:type",Object)],u.prototype,"_pawnProvider",void 0),i([s.inject(c.TYPES.IGuiProvider),r("design:type",Object)],u.prototype,"_guiProvider",void 0),i([s.inject(c.TYPES.IMakingMoveGui),r("design:type",Object)],u.prototype,"_makingMoveGui",void 0),i([s.inject(c.TYPES.IConfigProvider),r("design:type",Object)],u.prototype,"_configProvider",void 0),i([s.inject(c.TYPES.IFramesTimer),r("design:type",Object)],u.prototype,"_frameTimer",void 0),i([s.inject(c.TYPES.IMenuGui),r("design:type",Object)],u.prototype,"_menuGui",void 0),u=i([s.injectable(),o(0,s.inject(c.TYPES.canvas_name)),r("design:paramtypes",[String])],u),t.Game=u},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);let o=class{buildRing(e,t,n,i,r){for(var o=[],a=2*Math.PI/r,s=n-t,c=2*n*Math.sin(a/2),u=t+s/2,l=0;l<r;l++){var d=BABYLON.MeshBuilder.CreateBox("box",{size:1},e),h=l*a;d.rotation.y=-h+.5*Math.PI,d.position.x=Math.cos(h)*u,d.position.z=Math.sin(h)*u,d.scaling.x=c,d.scaling.y=i,d.scaling.z=s,o.push(d)}return o}};o=i([r.injectable()],o),t.ComplexShapesBuilder=o},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),s=n(2);let c=class{get scene(){if(!this._scene)throw new Error("Scene is not built.");return this._scene}buildScene(e,t){return o(this,void 0,void 0,(function*(){return new Promise(n=>BABYLON.SceneLoader.Load("","crokinole.babylon",t,t=>t.executeWhenReady(()=>{this._scene=t,this._texturePainter.paint(this._scene),this._skyboxBuilder.createSkybox(this._scene),this._lightsProvider.provideLights(this._scene),this._cameraManager.setupCamera(e,this._scene),n(null)})))}))}};i([a.inject(s.TYPES.ILightsProvider),r("design:type",Object)],c.prototype,"_lightsProvider",void 0),i([a.inject(s.TYPES.ICameraManager),r("design:type",Object)],c.prototype,"_cameraManager",void 0),i([a.inject(s.TYPES.ISkyboxBuilder),r("design:type",Object)],c.prototype,"_skyboxBuilder",void 0),i([a.inject(s.TYPES.ITexturePainter),r("design:type",Object)],c.prototype,"_texturePainter",void 0),c=i([a.injectable()],c),t.SceneBuilder=c},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{enablePhysics(e,t){e.enablePhysics(new BABYLON.Vector3(0,-9.81,0),new BABYLON.CannonJSPlugin);var n={mass:0,restitution:0,friction:0},i={mass:0,restitution:.75,friction:0},r=[],o=this._complexShapesBuilder.buildRing(e,.17,3.35,.67,20);o.forEach(t=>t.physicsImpostor=new BABYLON.PhysicsImpostor(t,BABYLON.PhysicsImpostor.BoxImpostor,n,e)),r=r.concat(o);var a=BABYLON.MeshBuilder.CreateBox("holeFloor",{size:.4,height:.55},e);a.physicsImpostor=new BABYLON.PhysicsImpostor(a,BABYLON.PhysicsImpostor.BoxImpostor,n,e),r.push(a);var s=BABYLON.MeshBuilder.CreateCylinder("outerField",{height:.6,diameter:8.6,tessellation:14},e);s.position.y=-.15,s.rotation.y=Math.PI/14,s.physicsImpostor=new BABYLON.PhysicsImpostor(s,BABYLON.PhysicsImpostor.CylinderImpostor,n,e),r.push(s);for(var c=Math.PI/7,u=4,l=4.05,d=(u+l)/2,h=l-u,f=2*u*Math.sin(c/2)+.1,p=.75,_=0;_<14;_++){var y=_*c;(g=BABYLON.MeshBuilder.CreateBox("band",{size:1},e)).rotation.y=-y,g.position.x=Math.cos(y)*d,g.position.z=Math.sin(y)*d,g.scaling.x=h,g.scaling.y=p,g.scaling.z=f,g.physicsImpostor=new BABYLON.PhysicsImpostor(g,BABYLON.PhysicsImpostor.BoxImpostor,n,e),r.push(g)}c=Math.PI/4,u=.04,l=1.025,p=.2;for(_=0;_<8;_++){var g;y=_*c;(g=BABYLON.MeshBuilder.CreateCylinder("pin",{diameter:2*u,height:p,tessellation:12},e)).position.x=Math.cos(y)*l,g.position.y=.435,g.position.z=Math.sin(y)*l,g.physicsImpostor=new BABYLON.PhysicsImpostor(g,BABYLON.PhysicsImpostor.CylinderImpostor,i,e),r.push(g)}var v=v=new BABYLON.StandardMaterial("fieldMat",e);v.diffuseColor=new BABYLON.Color3(.2,1,.2),r.forEach(e=>{t?e.material=v:e.visibility=0})}};i([o.inject(a.TYPES.IComplexShapesBuilder),r("design:type",Object)],s.prototype,"_complexShapesBuilder",void 0),s=i([o.injectable()],s),t.CrokinolePhysicsProvider=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);let o=class{provideLights(e){new BABYLON.SpotLight("left",new BABYLON.Vector3(5,5,0),new BABYLON.Vector3(-1,-1,0),Math.PI/2,1,e),new BABYLON.SpotLight("right",new BABYLON.Vector3(-5,5,0),new BABYLON.Vector3(1,-1,0),Math.PI/2,1,e),new BABYLON.SpotLight("top",new BABYLON.Vector3(0,5,5),new BABYLON.Vector3(0,-1,-1),Math.PI/2,1,e),new BABYLON.SpotLight("bottom",new BABYLON.Vector3(0,5,-5),new BABYLON.Vector3(0,-1,1),Math.PI/2,1,e)}};o=i([r.injectable()],o),t.CrokinoleLightsProvider=o},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);let a=class{constructor(){this._defaultPosition=new BABYLON.Vector3(0,5,10),this._defaultTarget=new BABYLON.Vector3(0,.385,0)}setupCamera(e,t){this._camera||(this._camera=new BABYLON.ArcRotateCamera("Camera",0,0,0,this._defaultPosition,t),this._camera.setTarget(this._defaultTarget))}moveCamera(e){this._camera.setPosition(e)}resetCamera(){this._camera.position=this._defaultPosition,this._camera.setTarget(this._defaultTarget)}};a=i([o.injectable(),r("design:paramtypes",[])],a),t.CrokinoleCameraManager=a},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),s=n(2),c=n(55);let u=class{startGame(){return o(this,void 0,void 0,(function*(){for(this._initGame(),this._gameGui.showGameState();yield this._updateGui(),!this._gameState.isGameFinished();)this._isFreeShot=this._gameState.isFreeShot(),this._newPawn=yield this._gameState.nextPlayer().move(),this._gameState.playerMoved(this._newPawn),this._isFreeShot||this._saveCollisions(),yield this._whenAllStopped(),this._disposeOutOfPlayPawns(),this._gameState.calculatePoints();this._gameGui.hideGameState(),this._gameGui.clear(),this._gameState.disposeAll(),this._menuGui.showGameEnded(()=>this._newGame(),()=>this._backToMenu(),this._gameState.getGameWinner().color)}))}_initGame(){var e=this._playerFactory.provideLocalPlayer("Cyan"),t=this._playerFactory.provideLocalPlayer("Purple");this._gameState=new c.GameState([e,t],this._pawnPositionHelper),this._onStepTarget=this._sceneProvider.scene.getMeshByName("outerField").physicsImpostor}_updateGui(){return o(this,void 0,void 0,(function*(){this._gameGui.hideGameState();var e=this._gameState.getPlayers(),t=this._gameState.getScores(),n=e[0],i=t.get(n),r=e[1],o=t.get(r);if(this._gameState.isRoundFinished()){var a=this._gameState.getRoundWinner()?this._gameState.getRoundWinner().color:null;this._gameState.newRound(),yield new Promise(e=>{this._menuGui.showRoundEnded(()=>e(),a,n.color,i.score,r.color,o.score)})}else yield new Promise(e=>{this._menuGui.showNextTurn(()=>e(),this._gameState.nextPlayer().color)});this._gameGui.setScores(n.color,i,r.color,o),this._gameGui.showGameState()}))}_whenAllStopped(){return o(this,void 0,void 0,(function*(){var e,t=this._gameState.getPawns().filter(e=>e.isInPlay);t.length>0&&(yield new Promise(n=>{e=e=>{t.every(e=>e.isStopped())&&n()},this._onStepTarget.registerAfterPhysicsStep(e)}),this._onStepTarget.unregisterAfterPhysicsStep(e))}))}_saveCollisions(){this._collided=new Set;var e=this._gameState.getPawns().filter(e=>e.isInPlay);this._colliders=e.map(e=>e.getMesh().physicsImpostor),this._collisionDetector=(t,n)=>{var i=e.find(e=>e.getMesh().physicsImpostor==n);i&&this._collided.add(i)},e.forEach(e=>{e.isInPlay&&e.getMesh().physicsImpostor.registerOnPhysicsCollide(this._colliders,this._collisionDetector)})}_disposeOutOfPlayPawns(){this._isFreeShot?this._pawnPositionHelper.isInCenter(this._newPawn.getMesh().position)||this._newPawn.disposePawn():(Array.from(this._collided).find(e=>e.color==this._gameState.nextPlayer().color)||(this._newPawn.disposePawn(),this._collided.forEach(e=>{e&&e.isInPlay&&e.disposePawn()})),this._gameState.getPawns().forEach(e=>{e&&e.isInPlay&&e.getMesh().physicsImpostor.unregisterOnPhysicsCollide(this._colliders,this._collisionDetector)})),this._gameState.getPawns().forEach(e=>{e.isInPlay&&(this._pawnPositionHelper.isIn20Hole(e.getMesh().position)?e.removeFrom20Hole():this._pawnPositionHelper.isOutOfField(e.getMesh().position)&&e.disposePawn())})}_newGame(){this._gameState.disposeAll(),this.startGame()}_backToMenu(){this._gameState.disposeAll(),this._menuGui.showMainMenu(()=>this.startGame())}};i([a.inject(s.TYPES.IMenuGui),r("design:type",Object)],u.prototype,"_menuGui",void 0),i([a.inject(s.TYPES.IGameStateGui),r("design:type",Object)],u.prototype,"_gameGui",void 0),i([a.inject(s.TYPES.IPlayerFactory),r("design:type",Object)],u.prototype,"_playerFactory",void 0),i([a.inject(s.TYPES.IPawnPositionHelper),r("design:type",Object)],u.prototype,"_pawnPositionHelper",void 0),i([a.inject(s.TYPES.ISceneBuilder),r("design:type",Object)],u.prototype,"_sceneProvider",void 0),u=i([a.injectable()],u),t.GameController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(56);t.GameState=class{constructor(e,t){this._SHOTS_PER_ROUND=12,this._players=e,this._nextPlayerIndex=0,this._pawns=new Map,this._scores=new Map,this._players.forEach(e=>{this._pawns.set(e,[]),this._scores.set(e,new i.Score(this._SHOTS_PER_ROUND))}),this._pawnPositionHelper=t}getPlayers(){return this._players}getPawns(){var e=[];return this._players.forEach(t=>e=e.concat(this._pawns.get(t))),e}getScores(){return this._scores}nextPlayer(){return this._players[this._nextPlayerIndex]}isFreeShot(){return 0==this._pawns.get(this._getOtherPlayer(this.nextPlayer())).filter(e=>e.isInPlay).length}playerMoved(e){this._pawns.get(this._players[this._nextPlayerIndex]).push(e),this._nextPlayerIndex=this._nextPlayerIndex+1>=this._players.length?0:this._nextPlayerIndex+1}calculatePoints(){this._players.forEach(e=>{var t=this._scores.get(e);t.points=0,this._pawns.get(e).forEach(e=>{e.isIn20Bowl?t.points+=20:e.isInPlay&&(t.points+=this._pawnPositionHelper.getPoints(e.getMesh().position))}),t.movesLeft=this._SHOTS_PER_ROUND-this._pawns.get(e).length})}newRound(){this.disposeAll();var e=this.getRoundWinner();if(null!=e){var t=this._scores.get(e);t.score+=t.points-this._scores.get(this._getOtherPlayer(e)).points}this._players.forEach(e=>{this._pawns.set(e,[]);var t=this._scores.get(e);t.points=0,t.movesLeft=this._SHOTS_PER_ROUND-this._pawns.get(e).length})}isRoundFinished(){return this._players.every(e=>this._pawns.get(e).length>=this._SHOTS_PER_ROUND)}getRoundWinner(){if(this.isRoundFinished()){var e=this._players[0],t=this._scores.get(e),n=this._players[1],i=this._scores.get(n);return t.points===i.points?null:t.points>i.points?e:n}return null}isGameFinished(){return null!=this._players.find(e=>this._scores.get(e).score>=100)}getGameWinner(){if(this.isGameFinished()){var e=this._players[0],t=this._scores.get(e),n=this._players[1],i=this._scores.get(n);return t.score===i.score?null:t.score>i.score?e:n}return null}disposeAll(){this._players.forEach(e=>this._pawns.get(e).forEach(e=>{e.getMesh().isDisposed()||e.disposePawn()}))}_getOtherPlayer(e){return this._players.find(t=>t!=e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Score=class{constructor(e){this.points=0,this.score=0,this.movesLeft=e}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{constructor(){this._isInit=!1,this._pointerActionObservables=new Map}registerOneCallListener(e,t){this._lazyInit(),this._lazyCreatePointerActionObservable(e),this._pointerActionObservables.get(e).addOnce(t)}registerListener(e,t){this._lazyInit(),this._lazyCreatePointerActionObservable(e),this._pointerActionObservables.get(e).add(t)}unregisterListener(e,t){this._lazyInit(),this._lazyCreatePointerActionObservable(e),this._pointerActionObservables.get(e).removeCallback(t)}_pointerActionListener(e,t){this._pointerActionObservables.has(e.type)&&this._pointerActionObservables.get(e.type).notifyObservers(e)}_lazyInit(){this._isInit||(this._sceneProvider.scene.onPointerObservable.add(this._pointerActionListener.bind(this)),this._isInit=!0)}_lazyCreatePointerActionObservable(e){this._pointerActionObservables.has(e)||this._pointerActionObservables.set(e,new BABYLON.Observable)}};i([o.inject(a.TYPES.ISceneBuilder),r("design:type",Object)],s.prototype,"_sceneProvider",void 0),s=i([o.injectable(),r("design:paramtypes",[])],s),t.PointerEventsManager=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2),s=n(59);let c=class{provideLocalPlayer(e){return new s.LocalPlayer(e,this._cameraManager,this._makingMoveGui,this._pawnProvider)}};i([o.inject(a.TYPES.ICameraManager),r("design:type",Object)],c.prototype,"_cameraManager",void 0),i([o.inject(a.TYPES.IMakingMoveGui),r("design:type",Object)],c.prototype,"_makingMoveGui",void 0),i([o.inject(a.TYPES.IPawnProvider),r("design:type",Object)],c.prototype,"_pawnProvider",void 0),c=i([o.injectable()],c),t.PlayerFactory=c},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.LocalPlayer=class{constructor(e,t,n,i){this._color=e,this._cameraManager=t,this._makingMoveGui=n,this._pawnProvider=i,this._movingDiscRotationCentre=BABYLON.Vector3.Zero(),this._movingDiscRotationAxis=new BABYLON.Vector3(0,1,0),this._movingDiscRotationRadians=.01}get color(){return this._color}move(){return i(this,void 0,void 0,(function*(){var e=this._pawnProvider.createPawn(this._color);yield this._choosePosition(e.getMesh());var t=yield this._chooseContactPoint(e.getMesh()),n=yield this._chooseDirection(e.getMesh()),i=yield this._chooseForce();return e.makeMove(t,n,i),this._cameraManager.resetCamera(),e}))}_choosePosition(e){return i(this,void 0,void 0,(function*(){this._followDiscWithCamera(e);var t=e.position,n=()=>{var n=e.position;this._normalize(Math.atan2(n.z,n.x)-Math.atan2(t.z,t.x))>-Math.PI/4&&this._moveDiscByRadians(e,this._movingDiscRotationRadians)},i=()=>{var n=e.position;this._normalize(Math.atan2(n.z,n.x)-Math.atan2(t.z,t.x))<Math.PI/4&&this._moveDiscByRadians(e,-this._movingDiscRotationRadians)};yield new Promise(e=>{this._makingMoveGui.showChoosePositionGui(n,i,()=>e())})}))}_normalize(e){return e>Math.PI?e-=2*Math.PI:e<-Math.PI&&(e+=2*Math.PI),e}_moveDiscByRadians(e,t){e.rotateAround(this._movingDiscRotationCentre,this._movingDiscRotationAxis,t),this._followDiscWithCamera(e)}_chooseContactPoint(e){return i(this,void 0,void 0,(function*(){var t=e.position,n=e=>t=e;return yield new Promise(t=>{this._makingMoveGui.showChooseContactPointGui(e,n,()=>t())}),t}))}_chooseDirection(e){return i(this,void 0,void 0,(function*(){this._cameraManager.moveCamera(new BABYLON.Vector3(0,10,0));var t=BABYLON.Vector3.ZeroReadOnly.subtract(e.position).normalize(),n=e=>t=e;return yield new Promise(i=>{this._makingMoveGui.showChooseDirectionGui(e,t,n,()=>i())}),t}))}_chooseForce(){return i(this,void 0,void 0,(function*(){var e=1,t=t=>e=t;return yield new Promise(e=>{this._makingMoveGui.showChooseForceGui(t,()=>e())}),4*e}))}_followDiscWithCamera(e){this._cameraManager.moveCamera(e.position.add(e.position.subtract(this._movingDiscRotationCentre).normalize().multiplyByFloats(2,2,2)))}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);let o=class{init(e){this._guiCanvas=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("crokinole",!0,e)}attachControl(e){this._guiCanvas.addControl(e)}detachControl(e){this._guiCanvas.removeControl(e)}clear(){this._guiCanvas.getDescendants(!0).forEach(e=>this.detachControl(e))}};o=i([r.injectable()],o),t.GuiProvider=o},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2),s=n(62);let c=class{constructor(){this._progressBarWidth=400}init(e){this._scene=e,this._constructChoosePositionGui(),this._constructChooseContactPointGui(),this._constructChooseDirectionGui(),this._constructChooseForceGui()}showChoosePositionGui(e,t,n){var i,r;this._guiProvider.attachControl(this._choosePositionGui),this._moveLeft.onPointerDownObservable.add((t,n)=>{i=setInterval(()=>e(),25)}),this._moveLeft.onPointerUpObservable.add((e,t)=>{clearInterval(i)}),this._moveRight.onPointerDownObservable.add((e,n)=>{r=setInterval(()=>t(),25)}),this._moveRight.onPointerUpObservable.add((e,t)=>{clearInterval(r)}),this._accept.onPointerUpObservable.addOnce((e,t)=>{this._moveLeft.onPointerDownObservable.clear(),this._moveLeft.onPointerUpObservable.clear(),this._moveRight.onPointerDownObservable.clear(),this._moveRight.onPointerUpObservable.clear(),this._guiProvider.detachControl(this._choosePositionGui),n()})}showChooseContactPointGui(e,t,n){var i;this._contactPointMarker.position=e.position,this._contactPointMarker.isVisible=!0;var r=(n,r)=>{(i=this._scene.pick(this._scene.pointerX,this._scene.pointerY,t=>t==e)).hit&&(this._contactPointMarker.position=i.pickedPoint,t(i.pickedPoint))};this._userInput.registerListener(BABYLON.PointerEventTypes.POINTERMOVE,r),this._userInput.registerOneCallListener(BABYLON.PointerEventTypes.POINTERDOWN,(e,t)=>{this._userInput.unregisterListener(BABYLON.PointerEventTypes.POINTERMOVE,r),this._contactPointMarker.isVisible=!1,this._contactPointMarker.position=BABYLON.Vector3.ZeroReadOnly,n()})}showChooseDirectionGui(e,t,n,i){var r;this._mousePicker.position.y=e.position.y,this._directionIndicator.position=e.position,this._rotateDirectionIndicator(BABYLON.Vector3.ZeroReadOnly.subtract(e.position)),this._setDirectionIndicatorVisibility(!0);var o=(t,i)=>{if((r=this._scene.pick(this._scene.pointerX,this._scene.pointerY,e=>e==this._mousePicker)).hit&&!r.pickedPoint.equals(e.position)){var o=r.pickedPoint.subtract(e.position);this._rotateDirectionIndicator(o),n(o)}};this._userInput.registerListener(BABYLON.PointerEventTypes.POINTERMOVE,o),this._userInput.registerOneCallListener(BABYLON.PointerEventTypes.POINTERDOWN,(e,t)=>{this._userInput.unregisterListener(BABYLON.PointerEventTypes.POINTERMOVE,o),this._setDirectionIndicatorVisibility(!1),i()})}_setDirectionIndicatorVisibility(e){this._directionIndicator.isVisible=e,this._directionIndicator.getChildMeshes().forEach(t=>t.isVisible=e)}_rotateDirectionIndicator(e){this._directionIndicator.rotation.y=-Math.atan2(e.z,e.x)}showChooseForceGui(e,t){var n=.002,i=.05;this._progressBar.widthInPixels=i*this._progressBarWidth,this._guiProvider.attachControl(this._progressBar);var r=()=>{var e=n*this._frameTimer.timeSinceLastFrame();(i+e<.05||i+e>1)&&(n=-n),i=s.MathUtils.clamp(i+e,.05,1),this._progressBar.widthInPixels=i*this._progressBarWidth};this._scene.registerBeforeRender(r),this._userInput.registerOneCallListener(BABYLON.PointerEventTypes.POINTERDOWN,(n,o)=>{this._scene.unregisterBeforeRender(r),this._guiProvider.detachControl(this._progressBar),e(i),t()})}_constructChoosePositionGui(){var e=new BABYLON.GUI.Grid;e.width=.5,e.height=.25,e.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,e.addColumnDefinition(.3),e.addColumnDefinition(10,!0),e.addColumnDefinition(.3),e.addColumnDefinition(10,!0),e.addColumnDefinition(.3),this._moveLeft=BABYLON.GUI.Button.CreateSimpleButton("moveLeft","Left"),this._moveLeft.height="50px",this._moveLeft.color="white",this._moveLeft.background="green",e.addControl(this._moveLeft,0,0),this._accept=BABYLON.GUI.Button.CreateSimpleButton("accept","Accept"),this._accept.height="50px",this._accept.color="white",this._accept.background="green",e.addControl(this._accept,0,2),this._moveRight=BABYLON.GUI.Button.CreateSimpleButton("moveRight","Right"),this._moveRight.height="50px",this._moveRight.color="white",this._moveRight.background="green",e.addControl(this._moveRight,0,4),this._choosePositionGui=e}_constructChooseContactPointGui(){this._contactPointMarker=BABYLON.MeshBuilder.CreateSphere("red",{diameter:.05},this._scene),this._contactPointMarker.material=this._scene.getMaterialByID("Green"),this._contactPointMarker.isVisible=!1}_constructChooseDirectionGui(){this._mousePicker=BABYLON.MeshBuilder.CreateGround("ground",{width:100,height:100},this._scene),this._mousePicker.isVisible=!1;var e=BABYLON.MeshBuilder.CreateCylinder("ring",{height:.005,diameter:.45,tessellation:32},this._scene);e.material=this._scene.getMaterialByID("Green");var t=BABYLON.MeshBuilder.CreateBox("pointer",{width:.5,depth:.08,height:.005},this._scene);t.material=this._scene.getMaterialByID("Green");var n=[new BABYLON.Vector2(0,.1),new BABYLON.Vector2(-.1,-.1),new BABYLON.Vector2(0,-.05),new BABYLON.Vector2(.1,-.1)],i=new BABYLON.PolygonMeshBuilder("polytri",n,this._scene).build(null,.005);i.rotate(new BABYLON.Vector3(0,1,0),Math.PI/2),i.position.x=.25,i.material=this._scene.getMaterialByID("Green"),this._directionIndicatorPointer=new BABYLON.Mesh("directionIndicatorPointer",this._scene),this._directionIndicatorPointer.addChild(t),this._directionIndicatorPointer.addChild(i),this._directionIndicatorPointer.position=e.position.add(new BABYLON.Vector3(.225,0,0)),this._directionIndicator=new BABYLON.Mesh("directionIndicator",this._scene),this._directionIndicator.addChild(e),this._directionIndicator.addChild(this._directionIndicatorPointer),this._setDirectionIndicatorVisibility(!1)}_constructChooseForceGui(){var e=BABYLON.GUI.Button.CreateSimpleButton("progressBar","");e.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,e.height="30px",e.widthInPixels=this._progressBarWidth,e.color="white",e.background="green",e.paddingBottomInPixels=50,this._progressBar=e}};i([o.inject(a.TYPES.IGuiProvider),r("design:type",Object)],c.prototype,"_guiProvider",void 0),i([o.inject(a.TYPES.IFramesTimer),r("design:type",Object)],c.prototype,"_frameTimer",void 0),i([o.inject(a.TYPES.IPointerEventsManager),r("design:type",Object)],c.prototype,"_userInput",void 0),c=i([o.injectable()],c),t.MakingMoveGui=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MathUtils=class{static clamp(e,t,n){return Math.min(Math.max(e,t),n)}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{constructor(){this._constructScoreGui()}showGameState(){this._guiProvider.attachControl(this._gameStateGui)}hideGameState(){this._guiProvider.detachControl(this._gameStateGui)}clear(){this._firstLabel.text="Left player",this._firstScore.text="0 / 0",this._firstMoves.text="12",this._secondLabel.text="Right player",this._secondScore.text="0 / 0",this._secondMoves.text="12"}setScores(e,t,n,i){this._firstLabel.text=e+" player",this._firstScore.text=t.score+" / "+t.points,this._firstMoves.text=t.movesLeft.toString(),this._secondLabel.text=n+" player",this._secondScore.text=i.score+" / "+i.points,this._secondMoves.text=i.movesLeft.toString()}setMessage(){throw new Error("Method not implemented.")}_constructScoreGui(){var e=new BABYLON.GUI.Grid;e.width=1,e.height=1,e.addColumnDefinition(.5),e.addColumnDefinition(.5),e.addRowDefinition(1);var t=new BABYLON.GUI.StackPanel;t.paddingTop="5%",t.paddingLeft="5%",t.width=1,t.height=1,t.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,t.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,this._firstLabel=new BABYLON.GUI.TextBlock,this._firstLabel.heightInPixels=50,this._firstLabel.text="Left player",this._firstLabel.color="white",this._firstLabel.fontSize=36,this._firstLabel.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t.addControl(this._firstLabel);var n=new BABYLON.GUI.TextBlock;n.heightInPixels=50,n.text="SCORE",n.color="white",n.fontSize=18,n.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t.addControl(n),this._firstScore=new BABYLON.GUI.TextBlock,this._firstScore.heightInPixels=50,this._firstScore.text="0 / 0",this._firstScore.color="white",this._firstScore.fontSize=36,this._firstScore.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t.addControl(this._firstScore);var i=new BABYLON.GUI.TextBlock;i.heightInPixels=50,i.text="MOVES LEFT",i.color="white",i.fontSize=18,i.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t.addControl(i),this._firstMoves=new BABYLON.GUI.TextBlock,this._firstMoves.heightInPixels=50,this._firstMoves.text="12",this._firstMoves.color="white",this._firstMoves.fontSize=36,this._firstMoves.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t.addControl(this._firstMoves),e.addControl(t,0,0);var r=new BABYLON.GUI.StackPanel;r.width=1,r.height=1,r.paddingTop="5%",r.paddingRight="5%",r.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,r.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,this._secondLabel=new BABYLON.GUI.TextBlock,this._secondLabel.heightInPixels=50,this._secondLabel.text="Right player",this._secondLabel.color="white",this._secondLabel.fontSize=36,this._secondLabel.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,r.addControl(this._secondLabel);var o=new BABYLON.GUI.TextBlock;o.heightInPixels=50,o.text="SCORE",o.color="white",o.fontSize=18,o.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,r.addControl(o),this._secondScore=new BABYLON.GUI.TextBlock,this._secondScore.heightInPixels=50,this._secondScore.text="0 / 0",this._secondScore.color="white",this._secondScore.fontSize=36,this._secondScore.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,r.addControl(this._secondScore);var a=new BABYLON.GUI.TextBlock;a.heightInPixels=50,a.text="MOVES LEFT",a.color="white",a.fontSize=18,a.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,r.addControl(a),this._secondMoves=new BABYLON.GUI.TextBlock,this._secondMoves.heightInPixels=50,this._secondMoves.text="12",this._secondMoves.color="white",this._secondMoves.fontSize=36,this._secondMoves.textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT,r.addControl(this._secondMoves),e.addControl(r,0,1),this._gameStateGui=e}};i([o.inject(a.TYPES.IGuiProvider),r("design:type",Object)],s.prototype,"_guiProvider",void 0),s=i([o.injectable(),r("design:paramtypes",[])],s),t.GameStateGui=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{constructor(){this._constructMainMenuGui(),this._constructPauseMenu(),this._constructNextTurn(),this._constructRoundEnded(),this._constructGameEnded()}showMainMenu(e){this._guiProvider.attachControl(this._mainMenuGui),this._local.onPointerUpObservable.addOnce((t,n)=>{this._guiProvider.detachControl(this._mainMenuGui),e()})}showPauseMenu(e,t){throw new Error("Method not implemented.")}showNextTurn(e,t){this._nextTurnLabel.text=t+" player's turn",this._guiProvider.attachControl(this._nextTurnGui),this._makeMove.onPointerUpObservable.addOnce((t,n)=>{this._guiProvider.detachControl(this._nextTurnGui),e()})}showRoundEnded(e,t,n,i,r,o){var a=t?t+" player won!":"It's a draw!";this._roundEndedLabel.text="Round ended - "+a,this._firstPlayerLabel.text=n+" Player",this._firstPlayerScore.text=i.toString(),this._secondPlayerLabel.text=r+" Player",this._secondPlayerScore.text=o.toString(),this._guiProvider.attachControl(this._roundEndedGui),this._nextRound.onPointerUpObservable.addOnce((t,n)=>{this._guiProvider.detachControl(this._roundEndedGui),e()})}showGameEnded(e,t,n){this._gameEndedLabel.text=n?n+" player won!":"It's a draw!",this._guiProvider.attachControl(this._gameEndedGui),this._newGame.onPointerUpObservable.addOnce((t,n)=>{this._guiProvider.detachControl(this._gameEndedGui),this._goToMenu.onPointerUpObservable.clear(),e()}),this._goToMenu.onPointerUpObservable.addOnce((e,n)=>{this._guiProvider.detachControl(this._gameEndedGui),this._newGame.onPointerUpObservable.clear(),t()})}_constructMainMenuGui(){var e=new BABYLON.GUI.Grid;e.width=1,e.height=1,e.background="#00000080",e.addColumnDefinition(1),e.addRowDefinition(.25),e.addRowDefinition(.2),e.addRowDefinition(.1),e.addRowDefinition(.1),e.addRowDefinition(.1),e.addRowDefinition(.25);var t=new BABYLON.GUI.TextBlock;t.text="Online Crokinole",t.color="white",t.fontSize=56,t.paddingBottom="15%",e.addControl(t,1,0);var n=BABYLON.GUI.Button.CreateSimpleButton("button","Online Multiplayer");n.color="white",n.background="gray",n.isEnabled=!1,n.paddingBottom="15%",n.paddingLeft="30%",n.paddingRight="30%",e.addControl(n,2,0),this._local=BABYLON.GUI.Button.CreateSimpleButton("button","Local Multiplayer"),this._local.color="white",this._local.background="green",this._local.paddingBottom="15%",this._local.paddingLeft="30%",this._local.paddingRight="30%",e.addControl(this._local,3,0);var i=BABYLON.GUI.Button.CreateSimpleButton("button","How to play");i.color="white",i.background="green",i.paddingBottom="15%",i.paddingLeft="30%",i.paddingRight="30%",i.onPointerUpObservable.add(()=>window.open("https://crokinole.guru/game-rules/","_blank")),e.addControl(i,4,0),this._mainMenuGui=e}_constructPauseMenu(){}_constructNextTurn(){var e=new BABYLON.GUI.Grid;e.width=1,e.height=1,e.addColumnDefinition(1),e.addRowDefinition(.25),e.addRowDefinition(.65),e.addRowDefinition(.1),this._nextTurnLabel=new BABYLON.GUI.TextBlock,this._nextTurnLabel.text="<color> player's turn",this._nextTurnLabel.color="white",this._nextTurnLabel.fontSize=36,e.addControl(this._nextTurnLabel,0,0),this._makeMove=BABYLON.GUI.Button.CreateSimpleButton("button","Make Move"),this._makeMove.color="white",this._makeMove.background="green",this._makeMove.paddingBottom="20%",this._makeMove.paddingLeft="30%",this._makeMove.paddingRight="30%",this._makeMove.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,e.addControl(this._makeMove,2,0),this._nextTurnGui=e}_constructRoundEnded(){var e=new BABYLON.GUI.Grid;e.width=1,e.height=1,e.background="#00000080",e.addColumnDefinition(1),e.addRowDefinition(.25),e.addRowDefinition(.15),e.addRowDefinition(.3),e.addRowDefinition(.2),e.addRowDefinition(.1),this._roundEndedLabel=new BABYLON.GUI.TextBlock,this._roundEndedLabel.text="Round ended",this._roundEndedLabel.color="white",this._roundEndedLabel.fontSize=32,e.addControl(this._roundEndedLabel,0,0);var t=new BABYLON.GUI.TextBlock;t.text="SCORE",t.color="white",t.fontSize=32,t.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,e.addControl(t,1,0);var n=new BABYLON.GUI.Grid;n.width=1,n.height=1,n.addColumnDefinition(.4),n.addColumnDefinition(.2),n.addColumnDefinition(.4),n.addRowDefinition(.5),n.addRowDefinition(.5),this._firstPlayerLabel=new BABYLON.GUI.TextBlock,this._firstPlayerLabel.text="Left Player",this._firstPlayerLabel.color="white",this._firstPlayerLabel.fontSize=24,n.addControl(this._firstPlayerLabel,0,0),this._secondPlayerLabel=new BABYLON.GUI.TextBlock,this._secondPlayerLabel.text="Right Player",this._secondPlayerLabel.color="white",this._secondPlayerLabel.fontSize=24,n.addControl(this._secondPlayerLabel,0,2),this._firstPlayerScore=new BABYLON.GUI.TextBlock,this._firstPlayerScore.text="0",this._firstPlayerScore.color="white",this._firstPlayerScore.fontSize=48,this._firstPlayerScore.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,n.addControl(this._firstPlayerScore,1,0),this._secondPlayerScore=new BABYLON.GUI.TextBlock,this._secondPlayerScore.text="0",this._secondPlayerScore.color="white",this._secondPlayerScore.fontSize=48,this._secondPlayerScore.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,n.addControl(this._secondPlayerScore,1,2),e.addControl(n,2,0),this._nextRound=BABYLON.GUI.Button.CreateSimpleButton("button","Continue"),this._nextRound.color="white",this._nextRound.background="green",this._nextRound.paddingBottom="20%",this._nextRound.paddingLeft="30%",this._nextRound.paddingRight="30%",this._nextRound.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,e.addControl(this._nextRound,4,0),this._roundEndedGui=e}_constructGameEnded(){var e=new BABYLON.GUI.Grid;e.width=1,e.height=1,e.background="#00000080",e.addColumnDefinition(1),e.addRowDefinition(.3),e.addRowDefinition(.15),e.addRowDefinition(.15),e.addRowDefinition(.1),e.addRowDefinition(.3);var t=new BABYLON.GUI.TextBlock;t.text="Game ended...",t.color="white",t.fontSize=48,e.addControl(t,1,0),this._gameEndedLabel=new BABYLON.GUI.TextBlock,this._gameEndedLabel.text="It's a draw!",this._gameEndedLabel.color="white",this._gameEndedLabel.fontSize=36,this._gameEndedLabel.textVerticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,e.addControl(this._gameEndedLabel,2,0);var n=new BABYLON.GUI.Grid;n.width=1,n.height=1,n.addColumnDefinition(.5),n.addColumnDefinition(.5),this._newGame=BABYLON.GUI.Button.CreateSimpleButton("button","Play Again"),this._newGame.color="white",this._newGame.background="green",this._newGame.paddingLeft="30%",this._newGame.paddingRight="5%",n.addControl(this._newGame,0,0),this._goToMenu=BABYLON.GUI.Button.CreateSimpleButton("button","Back To Menu"),this._goToMenu.color="white",this._goToMenu.background="green",this._goToMenu.paddingLeft="5%",this._goToMenu.paddingRight="30%",n.addControl(this._goToMenu,0,1),e.addControl(n,3,0),this._gameEndedGui=e}};i([o.inject(a.TYPES.IGuiProvider),r("design:type",Object)],s.prototype,"_guiProvider",void 0),s=i([o.injectable(),r("design:paramtypes",[])],s),t.MenuGui=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(66),s=n(2);let c=class{constructor(){this._frictionCoef=.02}init(e){this._scene=e,this._materials=new Map,this._materials.set("Cyan",new BABYLON.StandardMaterial("a",this._scene)),this._materials.set("Purple",new BABYLON.StandardMaterial("b",this._scene))}createPawn(e){var t=BABYLON.MeshBuilder.CreateCylinder("disc",{height:.12,diameter:.32,tessellation:20},this._scene);return t.position=this._pawnPositionHelper.getStartingPosition(e),t.material=this._materials.get(e),t.physicsImpostor=new BABYLON.PhysicsImpostor(t,BABYLON.PhysicsImpostor.CylinderImpostor,{mass:1,restitution:.75,friction:0},this._scene),t.physicsImpostor.registerAfterPhysicsStep(e=>{var t=e.getLinearVelocity(),n=e.getAngularVelocity();e.setLinearVelocity(t.multiplyByFloats(1-this._frictionCoef,1,1-this._frictionCoef)),e.setAngularVelocity(n.multiplyByFloats(1-this._frictionCoef,1-this._frictionCoef,1-this._frictionCoef))}),new a.Pawn(t,e,this._pawnPositionHelper)}};i([o.inject(s.TYPES.IPawnPositionHelper),r("design:type",Object)],c.prototype,"_pawnPositionHelper",void 0),c=i([o.injectable()],c),t.PawnProvider=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Pawn=class{constructor(e,t,n){this._MIN_VELOCITY=.01,this._mesh=e,this._impostor=e.physicsImpostor,this.isInPlay=!0,this.isIn20Bowl=!1,this.color=t,this._pawnPositionHelper=n}getMesh(){return this._mesh}makeMove(e,t,n){this._impostor.applyImpulse(t.multiplyByFloats(n,0,n),e)}isStopped(){var e=this._impostor.getLinearVelocity();return this._pawnPositionHelper.isOutOfBands(this._mesh.position)||Math.abs(e.x)<=this._MIN_VELOCITY&&Math.abs(e.y)<=this._MIN_VELOCITY&&Math.abs(e.z)<=this._MIN_VELOCITY}removeFrom20Hole(){this.isIn20Bowl=!0,this.disposePawn()}disposePawn(){this._impostor=null,this._mesh.dispose(),this.isInPlay=!1}}},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);let a=class{constructor(){this._startingPositions=new Map,this._startingPositions.set("Cyan",new BABYLON.Vector3(2.2556,.395,2.2556)),this._startingPositions.set("Purple",new BABYLON.Vector3(-2.2556,.395,-2.2556))}isIn20Hole(e){return this._distanceFromCenterSqaured(e)<.0289&&e.y<=.36}isInCenter(e){return this._distanceFromCenterSqaured(e)<=1.3924}isOutOfField(e){return this._distanceFromCenterSqaured(e)>11.2225}isOutOfBands(e){return e.y<.16}getPoints(e){var t=this._distanceFromCenterSqaured(e);return t<=.7396?15:t<=3.5344?10:t<=8.41?5:0}getStartingPosition(e){return this._startingPositions.get(e)}_distanceFromCenterSqaured(e){return e.x*e.x+e.z*e.z}};a=i([o.injectable(),r("design:paramtypes",[])],a),t.PawnPositionHelper=a},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),s=n(2);let c=class{init(){return o(this,void 0,void 0,(function*(){try{this._config=JSON.parse(yield this._httpRequestSender.get(this._path)),console.log(this._config)}catch(e){console.log("Config could not be fetched from provided path.")}}))}getSetting(e){return e.split(".").reduce((e,t)=>e&&e[t],this._config)}};i([a.inject(s.TYPES.config_path),r("design:type",String)],c.prototype,"_path",void 0),i([a.inject(s.TYPES.IHttpRequestSender),r("design:type",Object)],c.prototype,"_httpRequestSender",void 0),c=i([a.injectable()],c),t.OnlineConfigProvider=c},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(70);let s=class{constructor(){this._numberOfRetries=3,this._retriesIntervalInMs=2e3}get(e){return r(this,void 0,void 0,(function*(){return yield this._makeRequest("GET",e).retry(this._numberOfRetries,this._retriesIntervalInMs)}))}_makeRequest(e,t){return new a.RetriablePromise((n,i)=>{var r=new XMLHttpRequest;r.open(e,t,!0),r.onreadystatechange=()=>{4==r.readyState&&(r.status>=200&&r.status<300?n(r.response):i(r.statusText))},r.send()})}};s=i([o.injectable()],s),t.HttpRequestSender=s},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});class r extends Promise{constructor(e){super(e),this._executor=e}retry(e,t=0){return this.catch(n=>i(this,void 0,void 0,(function*(){return e>0?(t>0&&(yield new Promise(e=>setTimeout(e,t))),new r(this._executor).retry(e-1,t)):Promise.reject(n)})))}}t.RetriablePromise=r},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);let a=class{constructor(){this._memoryCache=new Map}store(e,t){return this._memoryCache.set(e,t),!0}retrieve(e){return this._memoryCache.get(e)}};a=i([o.injectable(),r("design:paramtypes",[])],a),t.MemoryCacheManager=a},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{constructor(){this._configKey="applyTextures"}paint(e){var t=this._config.getSetting(this._configKey);Array.isArray(t)&&t.forEach(t=>{var n=e.getMeshByID(t.target),i=this._materialsProvider.getMaterial(t.material);n&&i&&(n.material=i)})}};i([o.inject(a.TYPES.IConfigProvider),r("design:type",Object)],s.prototype,"_config",void 0),i([o.inject(a.TYPES.IMaterialsProvider),r("design:type",Object)],s.prototype,"_materialsProvider",void 0),s=i([o.injectable()],s),t.TexturePainter=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);let o=class{displayLoadingUI(){}hideLoadingUI(){window.document.getElementById("loadingScreen").style.display="none"}};o=i([r.injectable()],o),t.CrokinoleLoadingScreen=o},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{constructor(){this._materialsConfigKey="materials",this._lightingTypes=["diffuse","specular","emissive","ambient"]}getMaterial(e){return this._getMaterialFromCache(e)||this._getMaterialFromConfig(e)}_getMaterialFromCache(e){return this._cache.retrieve(this._getMaterialKey(e))}_getMaterialFromConfig(e){var t,n=this._config.getSetting(this._materialsConfigKey).find(t=>t.name===e);return n&&(t=new BABYLON.StandardMaterial(e,this._scene),this._setMaterialLighting(t,n),this._cache.store(this._getMaterialKey(e),t)),t}_getMaterialKey(e){return BABYLON.StandardMaterial.name+"."+e}_setMaterialLighting(e,t){this._lightingTypes.forEach(n=>{if(t.hasOwnProperty(n)){var i=t[n].color;Array.isArray(i)&&3===i.length&&(e[n+"Color"]=new BABYLON.Color3(i[0],i[1],i[2])),t[n].texture&&(e[n+"Texture"]=new BABYLON.Texture(t[n].texture,this._scene),e[n+"Texture"].uScale=t[n].uScale,e[n+"Texture"].vScale=t[n].vScale)}}),t.hasOwnProperty("backFaceCulling")&&(e.backFaceCulling=t.backFaceCulling)}};i([o.inject(a.TYPES.ICacheManager),r("design:type",Object)],s.prototype,"_cache",void 0),i([o.inject(a.TYPES.IConfigProvider),r("design:type",Object)],s.prototype,"_config",void 0),s=i([o.injectable()],s),t.StandardMaterialsProvider=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),a=n(2);let s=class{createSkybox(e){var t=BABYLON.MeshBuilder.CreateBox("skybox",{size:this._config.getSetting("skybox.size")},e),n=new BABYLON.StandardMaterial("skybox",e);n.backFaceCulling=!1,n.reflectionTexture=new BABYLON.CubeTexture(this._config.getSetting("skybox.path"),e,this._config.getSetting("skybox.extensions")),n.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,n.diffuseColor=new BABYLON.Color3(0,0,0),n.specularColor=new BABYLON.Color3(0,0,0),t.material=n}};i([o.inject(a.TYPES.IConfigProvider),r("design:type",Object)],s.prototype,"_config",void 0),s=i([o.injectable()],s),t.SkyboxBuilder=s},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);let o=class{init(e){this._scene=e,this._scene.registerBeforeRender(()=>{this._previousFrame=this._currentFrame,this._currentFrame=Date.now()})}timeSinceLastFrame(){return this._currentFrame-this._previousFrame||0}};o=i([r.injectable()],o),t.FramesTimer=o}]);